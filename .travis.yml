language: python
python: '3.4'
install:
  - pip install mkdocs
  - gem install mdl
  - npm install markdown-spellcheck -g
script:
  - mdl -s markdownlint-rules.rb .
  - mdspell --en-us -x -n -ran "**/*.md"
  - mkdocs build
  - ./link_validator.py
after_success:
  - >-
    if ! [[ "${TRAVIS_PULL_REQUEST}" = "false"  && "${TRAVIS_BRANCH}" = "master"
    ]]; then exit 0; fi
  - >-
    git remote add deploy
    https://${GH_TOKEN}@github.com/OpenIndiana/oi-docs.git
  - mkdocs gh-deploy -v --clean --remote-name deploy
env:
  global:
    - secure: >-
        Ski71s2whA7AYvPdhf4ZBpze3mNOpSmRlRjKTQt4xw7z8WDPAacvm5QlU26HtClpWeGkaJbW/2cizBKX9IrvGvJEjqlxU8Hjpn8oUa5o/dbPBf1GoYMplNL2Ki8Pe/a6rl8ym2o7aK1PeC1HXfDKgUAzhyy/Znl66x5oJp1GNPJVQ1MKTtXRqo5/iTuhtn7qmzhTae7mYRkyrTvadQbGbst4B9NnnAeEqw6iZrEtaNCU2WsCKSsY4Y8ogXCao9WgtozmcWuxxgEgpksJeL6oxq7FApq+kgGR73CFJP53IPmp5NyUAgwV0bSVtokzaPkIssXIsjAOqKOhdP+oxpykpiQNtWhaapfPGEQWM2/SvnQoRRLcmiuUXGOYWyi2pdl/vSMD+GtR7V0m19KBicNrJ0YMO3nzXJljlWFxJ9PzSq35Oqxao3oY0dVJgGUiCtLk9FLUoONiwWOpAail82U6ca+i/B8yumMPhMcSkEgP86p/Y4PXlhm+HVGtqWueLw2AtlW1UIbolJosAWqxOosmFeCcYt0/UuSWWU+nWrcoKSpIjZ7VfHAAVZ9ZticYlH/vu371H2eqbFbh5qfu2Ju0Fb481IYrSOmrgVx4zpagsvCsdCxBUGCnVBy+JZ9QvBXt60eW4opqIngY4fvfOzKNj4xKtYTWHjPXWoAYi8l3RuM=
