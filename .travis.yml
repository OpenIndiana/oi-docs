language: python
python: '3.4'
install:
  - pip install mkdocs
  - gem install mdl
  - npm install markdown-spellcheck -g
script:
  - mdl -s markdownlint-rules.rb .
  - mdspell --en-us -x -n -ran "**/*.md"
  - mkdocs build
  - ./link_validator.py
after_success:
  - >-
    if ! [[ "${TRAVIS_PULL_REQUEST}" = "false"  && "${TRAVIS_BRANCH}" = "master"
    ]]; then exit 0; fi
  - 'git remote add deploy https://${GH_TOKEN}@github.com/OpenIndiana/oi-docs.git'
  - git remote -v
  - git config user.name "Travis Build"
  - git fetch deploy && git fetch deploy gh-pages:gh-pages
  - mkdocs gh-deploy -v --clean --remote-name deploy --remote-branch gh-pages
env:
  global:
    - secure: >-
        p587VAparzjJGuI43uY+31CTSnfi3MTXP6YtD2yQ8NGTyhHUErRQ+wDgiC2ozQ7xucblglup0Lyiht46JPqPKTE+oofen2Ik+jcqxNbfpVj6z3x5JsS/UQzVkSTIWuej55Rr21hmPr7FhkRW2qTZbfpqPAKAJCgcdix0uW71CnEFXarivtg/rSsIiwt0me3IP3ePOumRMQiN4pLdro9XIcF1YJC8T/31fGPcmAa75ZBxTZXKwVEFWvBucRkyA592fzWBkfIQXJyykDkuSfASKW+IpRzef3pmxvoAthNQT+PcgupnTa7KAxO0dbL41xCnqgGvxVivM47G0VemLkdsVRU6oKNIkPezsMxF59j9kgAVntepltDJTVFIjivKYVvmVcCviqXK1GLgid32KFKO8T5nR4zsrTkB4uTyH/idq9J3UQCrGVhMZm+B4aJBAi+mkih4OQFfOVEKGC8XEZUnL2XKETbohfUnpLc4Gbx5TBFXN2rp9v34HkFOADKmMlaioH4Y87rt26yQsUEq9fvFaHnbjmXiJe/LfnIU8qLOSzhxWV/FJiHDS9hQrROKbnpySmHRsIboLD+36wvRjRHMtmZAnL+4B8HSHuJXmlQUjbhQVuAK1438idy9/aZA2nPizlhAHr+iwt5eVW6SF6ZYa4KYmtyNSBv30svsw7WdxXc=
