
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.openindiana.org/handbook/systems-administration/">
      
      
        <link rel="prev" href="../common-tasks/">
      
      
        <link rel="next" href="../network-communications/">
      
      
      <link rel="icon" href="../../oi_logo.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.7">
    
    
      
        <title>Systems Administration - OpenIndiana Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-administration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenIndiana Docs" class="md-header__button md-logo" aria-label="OpenIndiana Docs" data-md-component="logo">
      
  <img src="../../oi_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenIndiana Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Systems Administration
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenIndiana/oi-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../misc/openindiana/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  Handbook

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../books/about/" class="md-tabs__link">
          
  
  OpenSolaris Books

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contrib/content/" class="md-tabs__link">
          
  
  Contrib

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenIndiana Docs" class="md-nav__button md-logo" aria-label="OpenIndiana Docs" data-md-component="logo">
      
  <img src="../../oi_logo.png" alt="logo">

    </a>
    OpenIndiana Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenIndiana/oi-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/openindiana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About OpenIndiana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/oi-docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About OpenIndiana Docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenIndiana Code of Conduct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/pdl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Public Documentation License
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Release Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/latest-changes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Latest changes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2020.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2020.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2019.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2019.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2018.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2018.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2017.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2017.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2016.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2016.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2015.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2015.03-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015.03 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Handbook
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Handbook
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../common-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Systems Administration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Systems Administration
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accounts" class="md-nav__link">
    Accounts
  </a>
  
    <nav class="md-nav" aria-label="Accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-accounts" class="md-nav__link">
    User accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-or-service-accounts" class="md-nav__link">
    System (or Service) accounts
  </a>
  
    <nav class="md-nav" aria-label="System (or Service) accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#superuser-account" class="md-nav__link">
    Superuser account
  </a>
  
    <nav class="md-nav" aria-label="Superuser account">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#superuser-do-sudo1m" class="md-nav__link">
    SUperuser DO: sudo(1m)
  </a>
  
    <nav class="md-nav" aria-label="SUperuser DO: sudo(1m)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sudo-configuration" class="md-nav__link">
    Sudo configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sudoers-file-format" class="md-nav__link">
    Sudoers file format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-a-sudoers-file" class="md-nav__link">
    Example of a Sudoers file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roles-and-role-based-access-control" class="md-nav__link">
    Roles (and Role-Based Access Control)
  </a>
  
    <nav class="md-nav" aria-label="Roles (and Role-Based Access Control)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role-based-access-control-rbac" class="md-nav__link">
    Role-Based Access Control (RBAC)
  </a>
  
    <nav class="md-nav" aria-label="Role-Based Access Control (RBAC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#profile-execute-pfexec1" class="md-nav__link">
    ProFile EXECute: pfexec(1)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groups" class="md-nav__link">
    Groups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-accounts" class="md-nav__link">
    Managing accounts
  </a>
  
    <nav class="md-nav" aria-label="Managing accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-sudo-to-enable-a-user-to-shutdown-the-system" class="md-nav__link">
    Use sudo to enable a user to shutdown the system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-rbac-to-enable-a-user-to-shutdown-the-system" class="md-nav__link">
    Use RBAC to enable a user to shutdown the system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-management" class="md-nav__link">
    Software management
  </a>
  
    <nav class="md-nav" aria-label="Software management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-idioms" class="md-nav__link">
    Common Idioms
  </a>
  
    <nav class="md-nav" aria-label="Common Idioms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find-the-name-of-a-package-to-which-a-file-on-the-system-belongs" class="md-nav__link">
    Find the name of a package to which a file on the system belongs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishers" class="md-nav__link">
    Publishers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#active-directory-integration" class="md-nav__link">
    Active Directory Integration
  </a>
  
    <nav class="md-nav" aria-label="Active Directory Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#native-ad-integration" class="md-nav__link">
    Native AD integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kerberos-and-ldap" class="md-nav__link">
    Kerberos and LDAP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#winbind" class="md-nav__link">
    winbind
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management-of-system-resources" class="md-nav__link">
    Management of System Resources
  </a>
  
    <nav class="md-nav" aria-label="Management of System Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-system-information" class="md-nav__link">
    Basic system information
  </a>
  
    <nav class="md-nav" aria-label="Basic system information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-processes" class="md-nav__link">
    System processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-usage" class="md-nav__link">
    Disk usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#largest-files-in-a-directory" class="md-nav__link">
    Largest files in a directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#who-is-logged-on-to-the-system" class="md-nav__link">
    Who is logged on to the system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-all-software-packages-installed-on-the-system" class="md-nav__link">
    List all software packages installed on the system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-shutdown-reboot" class="md-nav__link">
    System shutdown, reboot, ...
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-management-facility" class="md-nav__link">
    Service Management Facility
  </a>
  
    <nav class="md-nav" aria-label="Service Management Facility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smf-basic-commands" class="md-nav__link">
    SMF Basic Commands
  </a>
  
    <nav class="md-nav" aria-label="SMF Basic Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#svcs" class="md-nav__link">
    svcs
  </a>
  
    <nav class="md-nav" aria-label="svcs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_1" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svcadm" class="md-nav__link">
    svcadm
  </a>
  
    <nav class="md-nav" aria-label="svcadm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_2" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svccfg" class="md-nav__link">
    svccfg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svcprop" class="md-nav__link">
    svcprop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inetadm" class="md-nav__link">
    inetadm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inetconv" class="md-nav__link">
    inetconv
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-strategy" class="md-nav__link">
    Basic Strategy
  </a>
  
    <nav class="md-nav" aria-label="Basic Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_3" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corrupt-service-configuration-revert-to-an-old-configuration" class="md-nav__link">
    Corrupt Service Configuration: Revert to an Old Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-failure" class="md-nav__link">
    Boot Failure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintenance-mode" class="md-nav__link">
    Maintenance Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-and-tuning" class="md-nav__link">
    Configuring and Tuning
  </a>
  
    <nav class="md-nav" aria-label="Configuring and Tuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-a-ups" class="md-nav__link">
    Configuring a UPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fault-management-fma" class="md-nav__link">
    Fault management (FMA)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-terminalsconsoles-vt" class="md-nav__link">
    Virtual Terminals/Consoles (VT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-management-smf" class="md-nav__link">
    Service management (SMF)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systems-logging-and-monitoring" class="md-nav__link">
    Systems logging and monitoring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#illumos-boot-process" class="md-nav__link">
    Illumos boot process
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zones" class="md-nav__link">
    Zones
  </a>
  
    <nav class="md-nav" aria-label="Zones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zone-networking-model" class="md-nav__link">
    Zone networking model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-setup-example" class="md-nav__link">
    Quick Setup Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-repository-configuration" class="md-nav__link">
    System repository configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_1" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixing-zone-installation-issues" class="md-nav__link">
    Fixing zone installation issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    Storage
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mounting-file-systems" class="md-nav__link">
    Mounting file systems
  </a>
  
    <nav class="md-nav" aria-label="Mounting file systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mounting-and-unmounting-iso-images" class="md-nav__link">
    Mounting and Unmounting ISO images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-ntfs-volumes-3rd-party-support" class="md-nav__link">
    Mounting NTFS Volumes - 3rd party support
  </a>
  
    <nav class="md-nav" aria-label="Mounting NTFS Volumes - 3rd party support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-software-installation-and-configuration" class="md-nav__link">
    Additional software installation and configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-the-ntfs-filesystem" class="md-nav__link">
    Mounting the NTFS filesystem
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-openindiana-as-an-iscsi-target-server-comstar" class="md-nav__link">
    Configuring OpenIndiana as an ISCSI Target Server - (COMSTAR)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-backups" class="md-nav__link">
    System backups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zfs" class="md-nav__link">
    ZFS
  </a>
  
    <nav class="md-nav" aria-label="ZFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-zfs-disks" class="md-nav__link">
    Importing ZFS disks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-one-mirror-their-root-zpool" class="md-nav__link">
    How does one mirror their root zpool?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-one-create-additional-zpools" class="md-nav__link">
    How does one create additional zpools?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-zpool-settings-and-attributes" class="md-nav__link">
    Modifying zpool settings and attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-zfs-file-system-settings-and-attributes" class="md-nav__link">
    Modifying zfs file system settings and attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-one-create-additional-zfs-datasets" class="md-nav__link">
    How does one create additional zfs datasets?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-system-swap" class="md-nav__link">
    Configuring system swap
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualization" class="md-nav__link">
    Virtualization
  </a>
  
    <nav class="md-nav" aria-label="Virtualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openindiana-as-a-virtualization-host-server" class="md-nav__link">
    OpenIndiana as a virtualization host server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localization" class="md-nav__link">
    Localization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dtrace" class="md-nav__link">
    Dtrace
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-networking" class="md-nav__link">
    Configuring Networking
  </a>
  
    <nav class="md-nav" aria-label="Configuring Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatic-configuration-nwam" class="md-nav__link">
    Automatic Configuration (NWAM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-from-nwam-to-manual-configuration" class="md-nav__link">
    Changing from NWAM to Manual Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-on-automatic-configuration-nwam" class="md-nav__link">
    More on Automatic Configuration (NWAM)
  </a>
  
    <nav class="md-nav" aria-label="More on Automatic Configuration (NWAM)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-nwam-configuration-tools" class="md-nav__link">
    Using NWAM configuration tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-automagic-online-help" class="md-nav__link">
    Network automagic online help
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting-nwam" class="md-nav__link">
    Troubleshooting NWAM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clustering-with-open-ha-cluster" class="md-nav__link">
    Clustering with Open HA Cluster
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../network-communications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Communications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community Contributed Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Community Contributed Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About Community Contributed Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/oracledb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Oracle Database Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/samqfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage Archive Manager Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sunray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sun Ray Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/inputmethod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intelligent Input Bus (IBus)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/squeak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Squeak Smalltalk-80 Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/texlive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TeX Live Typesetting Software Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/vagrant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vagrant Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../community/quikstor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using RDX Quikstor media
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community Hardware Compatibility List
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Community Hardware Compatibility List
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../community-hcl/getting-hardware-info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting information about hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../community-hcl/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../community-hcl/systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer's Corner
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Developer's Corner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/building-openindiana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building OpenIndiana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/userland/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building with oi-userland
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/legacy-consolidations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building legacy consolidations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/graphics-stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphics stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/pdf/ips-dev-guide.pdf" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Packaging and Delivering Software with IPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/distribution-constructor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using distribution constructor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/existing-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Existing tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/repo-cleanup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cleaning up OpenIndiana repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pdfdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PDF Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenSolaris Books
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            OpenSolaris Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About OpenSolaris Books
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/express/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solaris Express Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/trusted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trusted Extensions Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/develop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Titles
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contrib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contrib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/content/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Content Creation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/roles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Roles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Topics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Style Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markdown Syntax Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git Usage Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accounts" class="md-nav__link">
    Accounts
  </a>
  
    <nav class="md-nav" aria-label="Accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-accounts" class="md-nav__link">
    User accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-or-service-accounts" class="md-nav__link">
    System (or Service) accounts
  </a>
  
    <nav class="md-nav" aria-label="System (or Service) accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#superuser-account" class="md-nav__link">
    Superuser account
  </a>
  
    <nav class="md-nav" aria-label="Superuser account">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#superuser-do-sudo1m" class="md-nav__link">
    SUperuser DO: sudo(1m)
  </a>
  
    <nav class="md-nav" aria-label="SUperuser DO: sudo(1m)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sudo-configuration" class="md-nav__link">
    Sudo configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sudoers-file-format" class="md-nav__link">
    Sudoers file format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-a-sudoers-file" class="md-nav__link">
    Example of a Sudoers file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roles-and-role-based-access-control" class="md-nav__link">
    Roles (and Role-Based Access Control)
  </a>
  
    <nav class="md-nav" aria-label="Roles (and Role-Based Access Control)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role-based-access-control-rbac" class="md-nav__link">
    Role-Based Access Control (RBAC)
  </a>
  
    <nav class="md-nav" aria-label="Role-Based Access Control (RBAC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#profile-execute-pfexec1" class="md-nav__link">
    ProFile EXECute: pfexec(1)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groups" class="md-nav__link">
    Groups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-accounts" class="md-nav__link">
    Managing accounts
  </a>
  
    <nav class="md-nav" aria-label="Managing accounts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-sudo-to-enable-a-user-to-shutdown-the-system" class="md-nav__link">
    Use sudo to enable a user to shutdown the system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-rbac-to-enable-a-user-to-shutdown-the-system" class="md-nav__link">
    Use RBAC to enable a user to shutdown the system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-management" class="md-nav__link">
    Software management
  </a>
  
    <nav class="md-nav" aria-label="Software management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-idioms" class="md-nav__link">
    Common Idioms
  </a>
  
    <nav class="md-nav" aria-label="Common Idioms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find-the-name-of-a-package-to-which-a-file-on-the-system-belongs" class="md-nav__link">
    Find the name of a package to which a file on the system belongs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishers" class="md-nav__link">
    Publishers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#active-directory-integration" class="md-nav__link">
    Active Directory Integration
  </a>
  
    <nav class="md-nav" aria-label="Active Directory Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#native-ad-integration" class="md-nav__link">
    Native AD integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kerberos-and-ldap" class="md-nav__link">
    Kerberos and LDAP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#winbind" class="md-nav__link">
    winbind
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management-of-system-resources" class="md-nav__link">
    Management of System Resources
  </a>
  
    <nav class="md-nav" aria-label="Management of System Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-system-information" class="md-nav__link">
    Basic system information
  </a>
  
    <nav class="md-nav" aria-label="Basic system information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-processes" class="md-nav__link">
    System processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disk-usage" class="md-nav__link">
    Disk usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#largest-files-in-a-directory" class="md-nav__link">
    Largest files in a directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#who-is-logged-on-to-the-system" class="md-nav__link">
    Who is logged on to the system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-all-software-packages-installed-on-the-system" class="md-nav__link">
    List all software packages installed on the system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-shutdown-reboot" class="md-nav__link">
    System shutdown, reboot, ...
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-management-facility" class="md-nav__link">
    Service Management Facility
  </a>
  
    <nav class="md-nav" aria-label="Service Management Facility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smf-basic-commands" class="md-nav__link">
    SMF Basic Commands
  </a>
  
    <nav class="md-nav" aria-label="SMF Basic Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#svcs" class="md-nav__link">
    svcs
  </a>
  
    <nav class="md-nav" aria-label="svcs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_1" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svcadm" class="md-nav__link">
    svcadm
  </a>
  
    <nav class="md-nav" aria-label="svcadm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_2" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svccfg" class="md-nav__link">
    svccfg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svcprop" class="md-nav__link">
    svcprop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inetadm" class="md-nav__link">
    inetadm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inetconv" class="md-nav__link">
    inetconv
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-strategy" class="md-nav__link">
    Basic Strategy
  </a>
  
    <nav class="md-nav" aria-label="Basic Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples_3" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corrupt-service-configuration-revert-to-an-old-configuration" class="md-nav__link">
    Corrupt Service Configuration: Revert to an Old Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-failure" class="md-nav__link">
    Boot Failure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maintenance-mode" class="md-nav__link">
    Maintenance Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-and-tuning" class="md-nav__link">
    Configuring and Tuning
  </a>
  
    <nav class="md-nav" aria-label="Configuring and Tuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-a-ups" class="md-nav__link">
    Configuring a UPS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fault-management-fma" class="md-nav__link">
    Fault management (FMA)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-terminalsconsoles-vt" class="md-nav__link">
    Virtual Terminals/Consoles (VT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-management-smf" class="md-nav__link">
    Service management (SMF)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systems-logging-and-monitoring" class="md-nav__link">
    Systems logging and monitoring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#illumos-boot-process" class="md-nav__link">
    Illumos boot process
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zones" class="md-nav__link">
    Zones
  </a>
  
    <nav class="md-nav" aria-label="Zones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zone-networking-model" class="md-nav__link">
    Zone networking model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-setup-example" class="md-nav__link">
    Quick Setup Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-repository-configuration" class="md-nav__link">
    System repository configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_1" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixing-zone-installation-issues" class="md-nav__link">
    Fixing zone installation issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    Storage
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mounting-file-systems" class="md-nav__link">
    Mounting file systems
  </a>
  
    <nav class="md-nav" aria-label="Mounting file systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mounting-and-unmounting-iso-images" class="md-nav__link">
    Mounting and Unmounting ISO images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-ntfs-volumes-3rd-party-support" class="md-nav__link">
    Mounting NTFS Volumes - 3rd party support
  </a>
  
    <nav class="md-nav" aria-label="Mounting NTFS Volumes - 3rd party support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-software-installation-and-configuration" class="md-nav__link">
    Additional software installation and configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mounting-the-ntfs-filesystem" class="md-nav__link">
    Mounting the NTFS filesystem
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-openindiana-as-an-iscsi-target-server-comstar" class="md-nav__link">
    Configuring OpenIndiana as an ISCSI Target Server - (COMSTAR)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-backups" class="md-nav__link">
    System backups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zfs" class="md-nav__link">
    ZFS
  </a>
  
    <nav class="md-nav" aria-label="ZFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-zfs-disks" class="md-nav__link">
    Importing ZFS disks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-one-mirror-their-root-zpool" class="md-nav__link">
    How does one mirror their root zpool?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-one-create-additional-zpools" class="md-nav__link">
    How does one create additional zpools?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-zpool-settings-and-attributes" class="md-nav__link">
    Modifying zpool settings and attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-zfs-file-system-settings-and-attributes" class="md-nav__link">
    Modifying zfs file system settings and attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-one-create-additional-zfs-datasets" class="md-nav__link">
    How does one create additional zfs datasets?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-system-swap" class="md-nav__link">
    Configuring system swap
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualization" class="md-nav__link">
    Virtualization
  </a>
  
    <nav class="md-nav" aria-label="Virtualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openindiana-as-a-virtualization-host-server" class="md-nav__link">
    OpenIndiana as a virtualization host server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localization" class="md-nav__link">
    Localization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dtrace" class="md-nav__link">
    Dtrace
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-networking" class="md-nav__link">
    Configuring Networking
  </a>
  
    <nav class="md-nav" aria-label="Configuring Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatic-configuration-nwam" class="md-nav__link">
    Automatic Configuration (NWAM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-from-nwam-to-manual-configuration" class="md-nav__link">
    Changing from NWAM to Manual Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-on-automatic-configuration-nwam" class="md-nav__link">
    More on Automatic Configuration (NWAM)
  </a>
  
    <nav class="md-nav" aria-label="More on Automatic Configuration (NWAM)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-nwam-configuration-tools" class="md-nav__link">
    Using NWAM configuration tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-automagic-online-help" class="md-nav__link">
    Network automagic online help
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting-nwam" class="md-nav__link">
    Troubleshooting NWAM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clustering-with-open-ha-cluster" class="md-nav__link">
    Clustering with Open HA Cluster
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/OpenIndiana/oi-docs/edit/master/docs/handbook/systems-administration.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<!--

The contents of this Documentation are subject to the Public Documentation License Version 1.01
 (the "License"); you may only use this Documentation if you comply with the terms of this License.
A copy of the License is available at http://illumos.org/license/PDL.


The Original Documentation is _________________.

The Initial Writer of the Original Documentation is ___________ Copyright (C)_________[Insert year(s)].
All Rights Reserved. (Initial Writer contact(s):________________[Insert hyperlink/alias]).

Contributor(s): ______________________________________.

Portions created by ______ are Copyright (C)_________[Insert year(s)].
All Rights Reserved. (Contributor contact(s):________________[Insert hyperlink/alias]).

-->

<h1 id="system-administration">System Administration</h1>
<p>Once OpenIndiana has been installed, the system will require monitoring to
ensure smooth operation. Software will periodically have to be updated,
redundant software removed, new users added to the system, etc. All these
activities and many more are referred to as system administration.</p>
<p>Basic system administration can be reduced to a number of common tasks:</p>
<ul>
<li><a href="#accounts">Accounts</a></li>
<li><a href="#software-management">Software management</a></li>
<li><a href="#system-monitoring">System monitoring</a></li>
<li><a href="#virtualisation">Virtualisation</a></li>
<li><a href="#network-configuration">Network configuration</a></li>
<li><a href="#network-file-systems">Network file systems (NFS)</a></li>
</ul>
<p>While it is certainly possible to add more to this list or select alternative
items, this small selection is readily absorbed and is convenient to illustrate
a number of essential concepts central to OpenIndiana system administration.</p>
<h2 id="accounts"><a href="#accounts">Accounts</a></h2>
<p>There are different types of accounts provided by OpenIndiana:</p>
<ul>
<li><a href="#user-accounts">User accounts</a></li>
<li><a href="#accounts-service">System (or Service) accounts</a><ul>
<li><a href="#superuser-account">Superuser account</a></li>
<li><a href="#roles-and-role-based-access-control">Roles (Role-Based Access Control)</a></li>
</ul>
</li>
</ul>
<p>It is also possible to <em>group</em> users together:</p>
<ul>
<li><a href="#groups">Groups</a></li>
</ul>
<h3 id="user-accounts"><a href="#user-accounts">User accounts</a></h3>
<p>OpenIndiana supports multiple users to work on the same computer at the same time.
While only one person can sit in front of the monitor and keyboard, many users can be remotely logged onto the machine and all work simultaneously on it.
To use the system, a user requires an account, which are known as <em>user accounts</em>.</p>
<p>A user account facilitates interactive access to the system and is primarily used for day-to-day tasks.
Each user requiring access to the system should have a unique account specifically assigned to that user.
System administrators can thereby monitor user activity and establish system dignostics to optimise system performance.
Moreover permission to perform various system activities can be separately assigned to each user on an individual basis.</p>
<p>When the system is initially installed, usually only one user account is created.
Additional accounts can be added later.</p>
<p>Each user account has a number of attributes associated with it:</p>
<ul>
<li><strong>UID</strong> (user ID) a unique number which is the account ID on the system.
The UID is limited to a number less than 2147483647.
However, for compatibility reasons, a number above 65535 should not be used.</li>
<li><strong>GID</strong> (group ID) a unique number designating the primary group of the account.</li>
<li><strong>username</strong> the name of the account, which is frequently displayed on the login
  screen, depending on the login display manager in use.
  The username format is briefly described in <a href="https://illumos.org/man/4/passwd">passwd(4)</a></li>
<li><strong>password</strong> the password required to access the account.
                  <em>Passwords are used for security concerns.
                  Accounts without a password should are
                  a security hazard.</em></li>
<li><strong>comment</strong> (also referred to as gecos) - account description
This is often the user's real name.</li>
<li><strong>home directory</strong> the path to the directory which is <em>home</em> to the user and
  where the user is placed by default after logging onto the system.</li>
<li><strong>login shell</strong> user's initial shell program.</li>
<li><strong>password last change time</strong> time at which the the user password was last changed.</li>
<li>password aging information - several <a href="https://illumos.org/man/4/shadow">shadow(4)</a> fields determining when password should be changed<ul>
<li><strong>min</strong> the minimum number of days required between password changes;</li>
<li><strong>max</strong> the maximum number of days the password is valid;</li>
<li><strong>warn</strong> the number of days before password expires that the user is warned.</li>
</ul>
</li>
</ul>
<h3 id="system-or-service-accounts"><a href="#accounts-service">System (or Service) accounts</a></h3>
<p>System accounts, including the root account, are designed to be used for administrative purposes.
While all such tasks can be performed using the root account, system accounts all have limited powers with respect to root, thereby delegating only those powers necessary to carry out an administrative task to a particular system account.
System accounts often supply a specific function such as managing mail accounts or services to the network such as DNS, SMTP or WWW.</p>
<p>All system accounts have a <code>UID</code> less than 100.</p>
<p>All system accounts -- the one notable exception being root -- are supplied with either <code>LK</code> or <code>NP</code> in the second column of the <code>/etc/shadow</code> file.
In other words, it is possible to obtain a list of all system accounts:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># more /etc/shadow | grep -e NP -e LK | cut -d: -f1</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th><strong>Service account</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nobody</code></td>
<td>for services that require no privileges</td>
</tr>
<tr>
<td><code>pkg5srv</code></td>
<td>for the <code>pkg(5)</code> server</td>
</tr>
<tr>
<td><code>webservd</code></td>
<td>for web servers</td>
</tr>
<tr>
<td>...</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="superuser-account"><a href="#superuser-account">Superuser account</a></h4>
<table>
<thead>
<tr>
<th><strong>Command</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/1M/su">su(1M)</a></td>
<td>switch user</td>
</tr>
</tbody>
</table>
<p>Although the superuser account is a system account, its unique features and importance justify a section solely devoted to it.</p>
<p>Every UNIX-like system has one superuser account, named <code>root</code>, used for system administrative tasks.
This account has UID 0.</p>
<p>It is highly inadvisable to use this account for day-to-day usage such as browsing the web, reading emails or to watch movies.
The root account is not limited to any restrictions and any vulnerability while operating as root can cause serious damage to the system.</p>
<p>If a user is created during the OI installation process, then this user is assigned the root <a href="#accounts-rbac">role</a>, while the root account is not created by the system.
This means that it is not possible to directly log into a system using the root account as it does not exist.
It is, however, possible to log in as the user created during the installation and then switch to root using <a href="https://illumos.org/man/1M/su">su(1M)</a>.</p>
<p>However, if a user is not created during the OI installation, then the root account is created as a regular account and it is possible to directly log in to the root account.
Note, that even when root is created as a role, it is possible to use this account directly to log into the system when it is booted in single-user mode.</p>
<h5 id="superuser-do-sudo1m">SUperuser DO: sudo(1m)</h5>
<table>
<thead>
<tr>
<th><strong>Tool</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sudo(1m)</code></td>
<td>execute a command as superuser</td>
</tr>
</tbody>
</table>
<p>The <code>sudo</code> command, i.e., superuser do, permits a regular user to execute a specified set of commands with superuser privileges without having to become the superuser.
While <code>sudo</code> actually allows one user to execute a command as another user, it is predominantly used to allow a user to execute commands requiring elevated privileges as the superuser.
It is not always feasible for one user to perform all administrative tasks.
It would be more flexible if some tasks could be performed by some, say, experienced users.
To enable some users to carry out a command with root privileges, or to <em>do</em> an administrative command <code>sudo(1m)</code> can be used.
<code>sudo</code> can be configured to provide a user with elevated privileges for <em>all</em> commands requiring heightened privileges or configured to make only a select number of commands available to a user.
Furthermore, in addition to being able to equip users with permission to perform some actions, <code>sudo</code> can be applied to a <code>group</code>.
The group can be assigned to users who are then elevated to the powers available to that group.</p>
<p>One common strategy is to to define a minimum set of commands to perform some task, e.g., manage a mailserver, and then assign these commands to a group.
Thereby, mailserver management can be assigned to a user by adding the group membership to a user.</p>
<p>While elevated user privileges for <code>sudo</code> are configured in <code>/etc/sudoers</code>, user configuration is preferably performed by adding files to the <code>/etc/sudoers.d/</code> directory.
All files in this directory will be automatically added for use by <code>sudo</code>.
At a glance, any experienced administrator can view system changes to an installation; and system re-installation or migration becomes less ardent.</p>
<h6 id="sudo-configuration">Sudo configuration</h6>
<table>
<thead>
<tr>
<th><strong>Tool</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sudoers(4)</code></td>
<td>sudo security policy</td>
</tr>
<tr>
<td><code>/etc/sudoers</code></td>
<td>system file containing a list of users and groups allowed to use sudo</td>
</tr>
<tr>
<td><code>/etc/sudoers.d/</code></td>
<td>directory containing list of users and groups allowed to use sudo as added by system administrator</td>
</tr>
<tr>
<td><code>visudo(1m)</code></td>
<td>wrapper framework used to edit sudo configuration  files</td>
</tr>
</tbody>
</table>
<p>Elevated user privileges for <code>sudo</code> are configured in <code>/etc/sudoers</code>.
This file contains a list of users and groups allowed to use <code>sudo</code>, and the commands each user, or group, are allowed to use with <code>sudo</code>.</p>
<p>However, it is well advised to preserve this file in its pristine state upon installation.
Modifications intended for this file are preferably carried out by creating a new file and making the changes in this new file.
Add the new file to the <code>/etc/sudoers.d/</code> directory.
All files in this directory will be automatically assigned for use by <code>sudo</code>.</p>
<p>To edit any <code>sudo</code> configuration files is subject to subtle syntax pitfalls.
It is also dangerous for more than one user to edit this file at the same time.
To prevent such mishaps, <code>visudo</code> was designed to assist in avoiding such issues.
<code>visudo</code> works in conjunction with an editor, by default <code>vi</code>.</p>
<p>A standard installation of OpenIndian supplies an easy to use editor called <code>pluma</code>.
To start <code>visudo</code> with it using <code>pluma</code>, do the following:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>sudo<span class="w"> </span><span class="nv">EDITOR</span><span class="o">=</span>pluma<span class="w"> </span>visudo<span class="w"> </span>/etc/sudoers.d/whatever
</span></code></pre></div>
<p>This will start <code>pluma</code> to edit <code>whatever</code> with the <code>visudo</code> wrapper.</p>
<p>It is also possible to set the default editor in your login profile, e.g., for BASH: add <code>export EDITOR=pluma</code> to <code>$HOME/.bashrc</code> and start <code>visudo</code> as follows:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>-E<span class="w"> </span>visudo<span class="w"> </span>/etc/sudoers.d/whatever
</span></code></pre></div>
<p>The <code>-E</code> option permits passing environment variables from the user to the <code>sudo</code> environment, which is not always guaranteed.
The <code>EDITOR</code> environment variable can be set in your init profile, e.g., <code>.bashrc</code> if you are using the BASH shell.</p>
<p>Note: this depends on how <code>sudo</code> was compiled.
Currently, the version of <code>sudo</code> packaged with OpenIndiana supports the above mechanism.
Details can be found in the manpage.</p>
<h6 id="sudoers-file-format">Sudoers file format</h6>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">[</span>user<span class="o">]</span><span class="w"> </span><span class="o">[</span>host<span class="o">]([</span>run-as-user<span class="o">]</span>:<span class="o">[</span>run-as-group<span class="o">])</span><span class="w"> </span><span class="o">[</span>command1,<span class="w"> </span>command2<span class="o">]</span>
</span></code></pre></div>
<p><code>user</code> and <code>host</code> are separated by a tab.</p>
<ul>
<li><strong>user:</strong> is either a username or the name of a group. the name of a group is preceded
  an '%'.</li>
<li><strong>host:</strong> the name of one or more machines from which the commands are
  permitted to run.</li>
<li><strong>run-as-user:</strong> the name of a user by which the commands are permitted to be
  run.</li>
<li><strong>run-as-group:</strong> the name of a group which must be assigned to a user by
  which the commands are permitted to be run.</li>
<li><strong>commands:</strong> list of commands separated by commas permitted to be executed</li>
</ul>
<p>The sudoers file supports a rich collection of features beyond this cursory treatment.
Consult the <code>sudoers(1)</code> manpage, in particular the section titled 'Sudoers File Format' for details.</p>
<h6 id="example-of-a-sudoers-file">Example of a Sudoers file</h6>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Sample sudo configuration file</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1">#</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># User root is assigned all privileges</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>root<span class="w">  </span><span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span><span class="w"> </span>ALL
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># Assign all privileges to group admin. Any user assigned to admin has all privileges</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>%admin<span class="w"> </span><span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span><span class="w"> </span>ALL
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>...
</span></code></pre></div>
<p>To illustrate, we provide the following example.</p>
<h6 id="example">Example:</h6>
<p><em>Problem</em>
To shutdown the system, elevated privileges are required.
If a standard user issues the <code>shutdown</code> command, the following occurs:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>shutdown<span class="w"> </span>-i5<span class="w"> </span>-g0<span class="w"> </span>-y
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>/usr/sbin/shutdown:<span class="w">    </span>Only<span class="w"> </span>root<span class="w"> </span>can<span class="w"> </span>run<span class="w"> </span>/usr/sbin/shutdown
</span></code></pre></div>
<p>In this example, we would like to provide one or more users with the possibility of doing the following:</p>
<ul>
<li>the ability to run <code>/usr/sbin/shutdown</code> including the ability to specify
  command line arguments</li>
<li>the ability to run only <code>/usr/sbin/reboot</code>, without being allowed to specify
  any command line arguments</li>
<li>the ability to run all commands in <code>/opt/groups/offclub/bin</code>, a directory
specifically created for this group by an administrator.</li>
</ul>
<p><em>Solution Strategy:</em></p>
<ul>
<li>create a group called <code>offclub</code></li>
<li>create a file called <code>/etc/sudoers.d/offclub</code></li>
<li>edit <code>/etc/sudoers.d/offclub</code> and allow any member of group <code>offclub</code>
   to issue <code>/usr/sbin/shutdown</code> and <code>/usr/sbin/reboot</code></li>
<li>create <code>/opt/groups/offclub/bin</code>.</li>
</ul>
<p>We are going to create a group, <code>offclub</code> and all members of the offclub group to issue the required commands with relevant privileges.
Moreover, for demonstrative purposes rather less than for security concerns, we will create a directory and all members of this group will be allowed to run any command in this directory.</p>
<p>Generate the group.
The group name is restricted to a maximum of 8 lower case characters and create the directory which contains command that can be executed by members of the <code>offclub</code> group:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># groupadd offclub</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># sudo mkdir -p /opt/groups/offclub/bin</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$<span class="w"> </span>visudo<span class="w"> </span>/etc/sudoers.d/offclub
</span></code></pre></div>
<p>Add the following line:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>%offclub<span class="w">    </span><span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span><span class="w">    </span>/opt/groups/offclub/bin,<span class="w"> </span>/usr/sbin/reboot,<span class="w"> </span>/usr/sbin/shutdown
</span></code></pre></div>
<p>The <code>%</code> indicates that <code>offclub</code> is a group.
You can, off course, add users instead of groups here.
The final three indicate the commands, or directory; while ALL=(root) indicates that root privileges are bestowed for these commands.</p>
<p>There are a number of ways of enabling permission to execute files in a directory.
One way is to assign a file, say <em>myapp</em> to the group, and provide the group permission to execute *myapp':</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a># chown offclub /opt/groups/offgroup/bin/myapp
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a># chmod g+x /opt/groups/offgroup/bin/myapp
</span></code></pre></div>
<p>All members of the <code>offclub</code> can now perform the commands.
Example, add user <em>whoever</em> to the group:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>usermod<span class="w"> </span>-G<span class="w"> </span>offclub<span class="w"> </span>whoever
</span></code></pre></div>
<h4 id="roles-and-role-based-access-control"><a href="#roles-and-role-based-access-control">Roles (and Role-Based Access Control)</a></h4>
<table>
<thead>
<tr>
<th><strong>Tool</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/1/roles">roles(1)</a></td>
<td>print roles assigned to a user</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1/auths">auths(1)</a></td>
<td>print authorisations assigned to a user</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/5/privileges">privileges(5)</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1/ppriv">ppriv(1)</a></td>
<td>manage process privileges</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1/profiles">profiles(1)</a></td>
<td>print user profiles</td>
</tr>
</tbody>
</table>
<p>A role is a basic unit of Role-Based access control (RBAC) or set of <a href="https://illumos.org/man/5/privileges">privileges(5)</a> a user account can assume.
A role can be thought of as a no-login account.
It has most of the attributes of a normal user account and is identified as a normal user; but it is permissible to log into such an account directly.
One should login using a regular account and use <a href="https://illumos.org/man/1M/su">su(1M)</a> to assume the role.</p>
<h5 id="role-based-access-control-rbac">Role-Based Access Control (RBAC)</h5>
<p>The <em>all-or-nothing</em> power assigned to the root user has its obvious limitations.
While sudo is an improvement by limiting root privileges for only several commands, more granular control is often desired.</p>
<p>One improvement on the above systems would be one in which privileges could be assigned on a more fine-grained and selective basis; whereby the focus is less on commands and more on performing actions to accomplish some task.</p>
<p>Imagine a user assigned the task of administrating some particular hardware, for example, printers attached to the system.
A more desirable system would be one in which this user had the ability to permit users to use a printing device, remove print jobs from the print spool or add new printers to the system.
Moreover, it would be advantageous if it were possible to assign privileges to perform only these actions and none other.</p>
<p>RBAC was developed to accomplish this.</p>
<h6 id="profile-execute-pfexec1">ProFile EXECute: pfexec(1)</h6>
<table>
<thead>
<tr>
<th><strong>Tool</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/1/pfexec">pfexec(1)</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="groups"><a href="#groups">Groups</a></h3>
<table>
<thead>
<tr>
<th><strong>Command</strong></th>
<th><strong>Operand</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/1/groups">groups(1)</a></td>
<td>[user]</td>
<td>list groups assigned to a user</td>
</tr>
</tbody>
</table>
<p>A group is a collection of users which is predominantly used to assign privileges to users.</p>
<p>To obtain a list of groups assigned to a user:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="w">    </span>groups<span class="w"> </span><span class="o">[</span>user<span class="o">]</span>
</span></code></pre></div>
<p>Get a list of all groups on the system:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>    $ getent group | cut -d: -f1
</span></code></pre></div>
<h3 id="managing-accounts">Managing accounts</h3>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/1M/useradd">useradd(1M)</a></td>
<td>create a new account on the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/userdel">userdel(1M)</a></td>
<td>delete an account from the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/usermod">usermod(1M)</a></td>
<td>modify account information</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/groupadd">groupadd(1M)</a></td>
<td>create a group on the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/groupdel">groupdel(1M)</a></td>
<td>delete a group from the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/groupdel">groupmod(1M)</a></td>
<td>modify group information on the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/roleadd">roleadd(1M)</a></td>
<td>create a new role on the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/roledel">roledel(1M)</a></td>
<td>delete a role from the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1M/rolemod">rolemod(1M)</a></td>
<td>modify role information in the system</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1/rolemod">roles(1)</a></td>
<td>print roles assigned to a user</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1/passwd">passwd(1)</a></td>
<td>change login password and password attributes</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/8/id">id(8)</a></td>
<td>print user and groups IDs</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>useradd</strong> creates a user account on the system.
Attributes can also be set while an account is created such as a comment, group
membership, home directory path, UID number of the account or the login shell.</li>
<li><strong>userdel</strong> is used to remove an account from the system.</li>
<li><strong>usermod</strong> is used to modify properties of an existing account.</li>
<li><strong>groupadd</strong> creates a new group on the system by adding appropriate information to the /etc/group file.</li>
<li><strong>groupdel</strong> deletes a group from the system.</li>
<li><strong>groupmod</strong> is used to modify group attributes.</li>
<li><strong>roleadd</strong> is used create roles in the system.</li>
<li><strong>roledel</strong> deletes a role from the system.</li>
<li><strong>rolemod</strong> modifies role information on the system.</li>
<li><strong>roles</strong></li>
<li><strong>passwd</strong> is used to change the password of a user account.
An unprivileged user may only change the password of that user's account, whereas the superuser may change the password for any account.
A privileged user can also use <code>paasswd</code> to change login password attributes (such as expiration date) or can lock an account.</li>
</ul>
<h4 id="examples">Examples</h4>
<h5 id="use-sudo-to-enable-a-user-to-shutdown-the-system">Use <code>sudo</code> to enable a user to shutdown the system</h5>
<p>The root user or a user with sudo enabled can shutdown the system.</p>
<h5 id="use-rbac-to-enable-a-user-to-shutdown-the-system">Use RBAC to enable a user to shutdown the system</h5>
<p>We can use RBAC to enable a user to be able to shutdown the system.
However, we can create a role that allows only the privilege to shutdown the system, and no additional privileges.
We can then assign this role to one or several users.</p>
<ul>
<li>assign a privilege to a role to shutdown the system</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w">    </span><span class="c1"># roleadd shutdown</span>
</span></code></pre></div>
<ul>
<li>Assign a password</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="w">    </span><span class="c1"># passwd shutdown</span>
</span></code></pre></div>
<ul>
<li>Assign this role to a user</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">    </span><span class="c1"># usermod -R shutdown whoever</span>
</span></code></pre></div>
<ul>
<li>Create a SHUTDOWN profile</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="w">    </span><span class="c1"># echo &quot;SHUTDOWN:::profile to shutdown:help=shutdown.html&quot; &gt;&gt; /etc/security/prof_attr</span>
</span></code></pre></div>
<ul>
<li>Okay, now assign the role profile SHUTDOWN to the role shutdown</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="w">    </span><span class="c1"># rolemod -P SHUTDOWN shutdown</span>
</span></code></pre></div>
<ul>
<li>Assign some administrative command to profile</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="w">    </span><span class="c1"># echo &quot;SHUTDOWN:suser:cmd:::/usr/sbin/shutdown:uid=0&quot; &gt;&gt; /etc/security/exec_attr</span>
</span></code></pre></div>
<ul>
<li>Use it</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="w">    </span>$<span class="w"> </span>su<span class="w"> </span>shutdown
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">    </span><span class="c1"># shutdown -i5 -g0 -y</span>
</span></code></pre></div>
<p>Now user <em>whoever</em> can shutdown the system.</p>
<p>The <code>pfexec</code> command is more flexible in the number of privileges that can be assigned to a user.</p>
<h2 id="software-management"><a href="#software-management">Software management</a></h2>
<p>OpenIndiana uses the Image Packaging System, <em>IPS</em>, to manage software packages.
IPS supports installing, updating and searching OpenIndiana software repositories.
It also allows users to create and publish software packages to provide new software for other users.
Its features are vast and we only present the <em>essentials</em> here.</p>
<p>Software packages are <em>published</em> to a publisher.
An IPS software package consists of files, directories, links and dependencies to other packages.</p>
<p>The user interface to install, update, query, generate, etc packages on a publisher is <code>pkg</code>:</p>
<p><a href="https://illumos.org/man/1M/pkg">pkg(1M)</a> is the client for <strong>I</strong>mage <strong>P</strong>acking <strong>S</strong>ystem.</p>
<p>Usage:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>pkg<span class="w"> </span><span class="o">[</span>options<span class="o">]</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="o">[</span>cmd_options<span class="o">]</span><span class="w"> </span><span class="o">[</span>operands<span class="o">]</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Command</th>
<th>cmd_options</th>
<th>operands</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>help</code></td>
<td></td>
<td></td>
<td>list all commands</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>command</em></td>
<td>command usage</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>publisher</code></td>
<td></td>
<td></td>
<td>list package repositories (known as <em>publisher</em> on OI)</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>a_publisher</em></td>
<td>list details on <em>a_publisher</em></td>
</tr>
<tr>
<td><code>set-publisher</code></td>
<td></td>
<td></td>
<td>add a publisher</td>
</tr>
<tr>
<td><code>unset-publisher</code></td>
<td></td>
<td></td>
<td>Remove a publisher</td>
</tr>
<tr>
<td><code>refresh</code></td>
<td></td>
<td></td>
<td>update local package catalogue with new packages</td>
</tr>
<tr>
<td><code>update</code></td>
<td></td>
<td></td>
<td>update all packages to the latest versions</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>a_package</em></td>
<td>only update <em>a_package</em> to the latest version</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>list</code></td>
<td></td>
<td></td>
<td>list packages installed on the system</td>
</tr>
<tr>
<td></td>
<td><code>-a</code></td>
<td></td>
<td>also list non-installed packages from publishers</td>
</tr>
<tr>
<td><code>contents</code></td>
<td></td>
<td></td>
<td>list files in a package installed on the system</td>
</tr>
<tr>
<td></td>
<td><code>-r</code></td>
<td></td>
<td>list files on remote (publisher) package</td>
</tr>
<tr>
<td><code>info</code></td>
<td></td>
<td></td>
<td>get information on all packages on the system</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>a_package</em></td>
<td>get information on a particular package on the system</td>
</tr>
<tr>
<td></td>
<td><code>-r</code></td>
<td><em>a_package</em></td>
<td>get information on a remote package</td>
</tr>
<tr>
<td><code>search</code></td>
<td></td>
<td></td>
<td><strong>search for a package on the system</strong></td>
</tr>
<tr>
<td></td>
<td><code>-r</code></td>
<td></td>
<td><strong>search for a package not on the system</strong></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>install</code></td>
<td></td>
<td><em>a_package</em></td>
<td>install <em>a_package</em> onto the current boot environment</td>
</tr>
<tr>
<td></td>
<td><code>--be-name</code> <em>name</em></td>
<td><em>a_package</em></td>
<td>install on a new boot environment called <em>name</em>.The current be remains unchanged.</td>
</tr>
<tr>
<td><code>uninstall</code></td>
<td></td>
<td><em>a_package</em></td>
<td>remove a package from the system</td>
</tr>
<tr>
<td><code>revert</code></td>
<td></td>
<td></td>
<td>restore files to their original installed states</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>/the/path/file</em></td>
<td>restore <em>file</em> located in /the/path/ to its original state</td>
</tr>
<tr>
<td><code>verify</code></td>
<td></td>
<td></td>
<td>verify all packages. Only report with a message on error</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>a_package</em></td>
<td>verify only <em>a_package</em></td>
</tr>
<tr>
<td><code>fix</code></td>
<td></td>
<td></td>
<td>fix any errors detected by <code>verify</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>a_package</em></td>
<td>fix any errors detected by <code>verify</code> for <em>a_package</em></td>
</tr>
</tbody>
</table>
<ul>
<li><code>help</code>: Without any commands will provide a list of all commands supported by <code>pkg</code>.
When followed by a command, usage on that command will be provided.</li>
<li><code>publisher</code>: a package repository is known as a <em>publisher</em> on OI.
 A publisher contains one or more packages that can be queried or installed by <code>pkg</code> using an appropriate pkg command.
 A list of all publishers configured to be used by <code>pkg</code> can be obtained by using this command without any options.
 By supplying a publisher, details of the publisher will be provided.</li>
<li><code>set-publisher</code>: add a new publisher to the user's list of publishers</li>
<li><code>refresh</code>: the local system has a catalogue of all packages provided by all publishers.
Using this command without any operands will update the catalogue for all publishers configured by the user.
By supplying a publisher, only packages provided by that publisher will be updated.</li>
<li><code>list</code>: by default will list installed packages. Use <code>-a</code> to also list packages in publishers.</li>
<li><code>contents</code>: this command lists files in a package that is currently installed. Use <code>-r</code> to list files in packages not installed on a <em>r</em>emote publisher.</li>
<li><code>info</code>: by default provides information on installed packages.
   Add the <code>-r</code> option for information from publishers.</li>
<li><code>install</code>: by default, a package is installed to the current boot environment.
It is possible to install to a boot environment, leaving the current boot environment untouched. For example, to create a clone of the current boot environment, and install the package to the new boot environment, use the <code>--be-name</code> option. This is the recommended way to install new packages.</li>
<li><code>search</code>: by default queries only installed packages, <code>-r</code> extends to publishers.
   Support for wildcards <em>?</em> and <em>*</em> in the query.</li>
<li><code>revert</code>: this will adjust a software package to that state it originally had after installation, including configuration files and file permissions.</li>
</ul>
<h3 id="example_1">Example</h3>
<p>To illustrate, look for, install and validate a package called <code>ffmpeg</code>, which is a video and audio processing application.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>$ pkg refresh &amp;&amp; pkg update
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>$ pkg list -a | grep -i ffmpeg
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>$
</span></code></pre></div>
<p>The result of running this command is empty: nothing found. Post a question to the OI community or ask on IRC <a href="../../misc/openindiana/#how-can-i-contact-openindiana-community">About OpenIndiana, How can I contact OpenIndiana community</a>.
Assuming someone informs you that the package does exit and can be found on the publisher <em>hipster-encumbered</em> with address <em>http://pkg.openindiana.org/hipster/</em> then you can continue.</p>
<p>Add the <em>hipster-encumbered</em> publisher and try again:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a># sudo pkg set-publisher -G&#39;*&#39; -g http://pkg.openindiana.org/hipster hipster-encumbered
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>$ pkg publisher
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>    PUBLISHER                   TYPE     STATUS P LOCATION
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>    userland                    origin   online F file:///export/home/benn/devl/oi-userland/i386/repo/
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>    openindiana.org (non-sticky) origin   online F http://pkg.openindiana.org/hipster/
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>    hipster-encumbered              origin   online F https://pkg.openindiana.org/hipster-encumbered/
</span></code></pre></div>
<p>So <em>hipster-encumbered</em> has been added as the last publisher to our list of publishers. Obtain information on the publisher:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>$  pkg publisher hipster-encumbered
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>            Publisher: hipster-encumbered
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>                Alias:
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>           Origin URI: https://pkg.openindiana.org/hipster-encumbered/
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>        Origin Status: Online
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>              SSL Key: None
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>             SSL Cert: None
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>          Client UUID: 7501a944-6bce-11ec-893c-880027010518
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>      Catalog Updated: December 21, 2021 at 10:58:33 PM
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>              Enabled: Yes
</span></code></pre></div>
<p>So the publisher is online, i.e., is up and ready to accept requests.</p>
<p>Search again for out package:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>$ pkg list -a | grep -i ffmpeg
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    video/ffmpeg (hipster-encumbered)                 4.4.1-2020.0.1.0           ---
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>$ pkg info -r video/ffmpeg
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>    Name: video/ffmpeg
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>              Summary: A very fast video and audio converter
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>             Category: System/Multimedia Libraries
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>                State: Installed
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>            Publisher: hipster-encumbered
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>              Version: 4.4.1
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>               Branch: 2020.0.1.0
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>       Packaging Date: November  9, 2021 at 01:39:02 PM
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>    Last Install Time: January  2, 2022 at 01:34:22 PM
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>                 Size: 58.88 MB
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>                 FMRI: pkg://hipster-encumbered/video/ffmpeg@4.4.1-2020.0.1.0:20211109T133902Z
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>           Source URL: https://www.ffmpeg.org/releases/ffmpeg-4.4.1.tar.bz2
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>          Project URL: https://www.ffmpeg.org/
</span></code></pre></div>
<p>We can list all files in the package with <code>pkg contents -r video/ffpmeg</code>. Finally, install:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a># pkg install video/ffmpeg
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>$ pkg verify pkg://hipster-encumbered/video/ffmpeg@4.4.1-2020.0.1.0:20211109T133902Z
</span></code></pre></div>
<h3 id="common-idioms">Common Idioms</h3>
<h4 id="find-the-name-of-a-package-to-which-a-file-on-the-system-belongs">Find the name of a package to which a file on the system belongs</h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>$ pkg search -o pkg.name -l path:*ffmpeg
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>    PKG.NAME
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>    video/ffmpeg
</span></code></pre></div>
<h3 id="publishers">Publishers</h3>
<table>
<thead>
<tr>
<th>Publisher</th>
<th>Location</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>openindiana.org</code></td>
<td><code>http://pkg.openindiana.org/hipster/</code></td>
<td>Primary OI publisher</td>
</tr>
<tr>
<td><code>hipster-encumbered</code></td>
<td><code>https://pkg.openindiana.org/hipster-encumbered/</code></td>
<td>many multimedia packages</td>
</tr>
<tr>
<td><code>localhostoih</code></td>
<td><code>https://sfe.opencsw.org/localhostoih</code></td>
<td>experimental, be careful with version conflicts</td>
</tr>
</tbody>
</table>
<h3 id="references">References</h3>
<p>This section provides the fundamentals of <code>pkg</code>. More detailed information is available here:</p>
<ul>
<li><a href="../getting-started/#image-package-system-ips">Getting Started, section: Image Package System (IPS)</a> for details.</li>
<li><a href="https://docs.openindiana.org/dev/pdf/ips-dev-guide.pdf" title="whatever">OpenSolaris 2009.06 Image Packaging System Guide</a> is a thorough treatment.</li>
</ul>
<h3 id="active-directory-integration">Active Directory Integration</h3>
<h4 id="introduction">Introduction</h4>
<p>There are at least three different possible approaches for Active Directory authentication and each has its pros and cons.</p>
<ol>
<li>Use the new native AD integration with <strong>idmap</strong>, <strong>nss_ad</strong> and <strong>kclient</strong>, this will work with CIFS and NFS out of the box.</li>
<li>Use Kerberos and LDAP (<strong>kclient</strong>, <strong>ldapclient</strong>, <strong>pam_krb5</strong> and <strong>nss_ldap</strong>).</li>
<li>Use <strong>windbind</strong> (<strong>pam_winbind</strong> and <strong>nss_winbind</strong>).</li>
</ol>
<h4 id="native-ad-integration">Native AD integration</h4>
<ul>
<li>Pro: Fully integrated and native tools only</li>
<li>Cons: Doesn't work for UNIX services other than CIFS and NFS. The ephemeral id mapping strategy supposedly wasn't designed for other UNIX services. As a result several problems arrise, one of them is that the mappings aren't constant over the lifetime of UNIX processes which severly breaks UNIX semantics. Depending on your UNIX service you will see unexpected results or even process crashing.</li>
</ul>
<p>In order to use this approach with any UNIX service (eg <strong>FTP</strong>) you need to enable <em>directory-based name mapping</em> and install <strong>IDMU</strong> (Identity Management for UNIX) on the AD server.</p>
<p>Refer to the original documentation from Oracle for getting this working: <a href="http://docs.oracle.com/cd/E23824_01/html/821-1455/adsetup-10.html">nss_ad</a>, <a href="http://docs.oracle.com/cd/E19963-01/html/821-1449/manageidmutm.html">CIFS</a>.</p>
<h4 id="kerberos-and-ldap">Kerberos and LDAP</h4>
<ul>
<li>Pro: Fully integrated and native tools only</li>
<li>Cons: Requires installation of additional role services (IDMU, Identity Management for UNIX) on the Active Directory side</li>
</ul>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>On the Wiki the 'Kerberos and LDAP' page was a separate detailed article on configuration of Windows Server 2008 Active Directory to work with OI. As of 2021, Windows Server 2008 is EoL. This section should not be migrated until it has been checked and updated for recent Windows. Ideally this information should be on a separate page (potentially community contributions) as its large and contains a lot of Windows information.</p>
</div>
</div>
<h4 id="winbind">winbind</h4>
<ul>
<li>Pro: Easy setup, no AD modification</li>
<li>Cons: Depends on 3rd party software (Samba), group membership resolution didn't work</li>
</ul>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>As above note, the 'winbind' page was a separate detailed article which needs to be checked and updated before it's migrated.</p>
</div>
</div>
<h2 id="management-of-system-resources">Management of System Resources</h2>
<h3 id="basic-system-information">Basic system information</h3>
<h4 id="system-processes">System processes</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>$<span class="w"> </span>prstat
</span></code></pre></div>
<p>This command provides a host of information on all processes running on the system.
Some of the information provided is as follows:</p>
<ul>
<li>percentage of CPU used by each process</li>
<li>amount of memory consumed by each process</li>
<li>unique id of each process (which can, for example, be used to stop the process)</li>
</ul>
<h4 id="disk-usage">Disk usage</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># df -h</span>
</span></code></pre></div>
<p>Provides information on disk size, amount of space used and available free space
for all attached storage devices. The <code>-h</code> option reports this information in
human readable format.</p>
<h4 id="largest-files-in-a-directory">Largest files in a directory</h4>
<p>Go to the directory using the <code>cd</code> command and issue the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>$<span class="w"> </span>du<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-n
</span></code></pre></div>
<p>This will list the size of each file in the current directory and all
sub-directories, starting with the smallest up to the largest files.</p>
<h4 id="who-is-logged-on-to-the-system">Who is logged on to the system</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>$<span class="w"> </span>listusers
</span></code></pre></div>
<h4 id="list-all-software-packages-installed-on-the-system">List all software packages installed on the system</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>$<span class="w"> </span>pkg<span class="w"> </span>list
</span></code></pre></div>
<h3 id="system-shutdown-reboot">System shutdown, reboot, ...</h3>
<p>OpenIndiana defines a number of different system states known as run-levels. You
can change from one system state to another by using the <code>shutdown</code> command and
specify the run-level using the <code>i</code> option. You can always determine the
run-level via <code>who -r</code>.</p>
<p>You must be root or have root privileges (e.g., using <code>sudo</code>) to send the system
into a different state, i.e., turn off, reboot, etc. Shutdown and turn off all
hardware (if supported by the hardware) now:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a># shutdown -i5 -g0 -y
</span></code></pre></div>
<p>Changing the run-level of the system can be disruptive to other users currently
using the system. Thus, it is always wise to establish who is currently logged
onto the system before changing the run-level.</p>
<ul>
<li><code>-i [run-level]</code> is used to specify the run-level. This is either a digit or a
  single letter. Here are some run-levels available:<ul>
<li><code>5</code> stop all system services, and turns off hardware devices, etc.</li>
<li><code>6</code> reboot the system.</li>
<li><code>1</code> single-user mode. Primarily used for system maintenance.</li>
<li><code>S</code> single-user mode where only a command line terminal is available.</li>
</ul>
</li>
<li><code>-g [seconds]</code> is used to specify the number of seconds after which to commence
   shutting down services. <code>0</code> immediately intiates shutting down all services.</li>
<li><code>-y</code> automatically answers all system questions with 'yes'. The shutdown
   process is not interrupted by system prompts requiring user-interactive
   intervention.</li>
</ul>
<h2 id="service-management-facility">Service Management Facility</h2>
<p>Services are an extension to processes.
The administration of services is carried out on OpenIndian using <em>Service Management Facility</em>, commonly known as <em>SMF</em>.</p>
<p>As application become more complex, their demands on system resources and peripheral resource increase.
Modern applications often require more resource to provide more services.
Resources such as an internet connection, a web server running in the background, a databank up and running in an appropriate state or mode of operation are increasingly found to be the prerequisite of modern applications.
Although the application may provide users with a single service, the application might require many processes before it can itself run.</p>
<p>To provide some system functionality, more than one process is required and some of these processes might depend on other processes.
A modern application that provides some functionality might require a group of interrelated processes.
We would like to start, stop, analyse, diagnose, in other words, manage the group as a single unit.
We refer to such a unit as a <em>service</em> and the mechanism of providing this on OpenIndiana as <em>Service Management Facility</em>.</p>
<p>SMF was originally developed to improve limitations of the old startup mechanism of the Solaris operating system using scripts known as <code>init.d</code>.</p>
<table>
<thead>
<tr>
<th><strong>Service Management Framework on OI</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/7/smf">smf(7)</a></td>
<td>Service Management Facility</td>
</tr>
</tbody>
</table>
<p>A service is a definition of how a service should be started while a service instance is a precise configuration.
Some services can have multiple instances whereas others are defined to be a singleton.</p>
<p>Each service instance can be identified by a FMRI which uniquely defines each instance, which is why the SMF commands use FMRIs to identify services.
A SMF FMRI is composed of three sections, the sections are delimited by a colon:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="w">    </span>service<span class="w"> </span>resource:service<span class="w"> </span>name:service<span class="w"> </span>instance
</span></code></pre></div>
<p>FMRIs are found in various areas: software packages, ZFS, etc., and the first part denotes this area or <em>scheme</em>.
For software packages the scheme is  <code>pkg:</code>, while for services the scheme is <code>svc</code>.</p>
<p>Many commands use the FMRI to identify service instances, but it is not the only way of specifying a service instance to the commands.
In this manual, nomenclature is simplified as <code>[service]</code> as a unique identification of a service.</p>
<ul>
<li><a href="https://dlc.openindiana.org/docs/osol/20090715/IMGPACKAGESYS/html/index.html">Opensolaris documentation</a></li>
</ul>
<h3 id="smf-basic-commands">SMF Basic Commands</h3>
<table>
<thead>
<tr>
<th><strong>Command</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://illumos.org/man/8/mpstat">svcs(1)</a></td>
<td>display information about services</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/7/scvadm">svcadm(7)</a></td>
<td>manage services (enable/disable, ...)</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/8//svccfg">svccfg(8)</a></td>
<td>configure services</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/1/svcprop">svcprop(1)</a></td>
<td>display service configuration properties</td>
</tr>
<tr>
<td><a href="https://illumos.org/man/8/inetadm">inetadm(8)</a></td>
<td>initialise service managed by <code>inetd</code></td>
</tr>
<tr>
<td><a href="https://illumos.org/man/8/inetconv">inetconv(8)</a></td>
<td>convert <code>inetd</code> service to smf services</td>
</tr>
</tbody>
</table>
<p>Use of the SMF commands require relevant privileges.
The following RBAC profiles can be made available to all a user to become a SMF administrator:</p>
<table>
<thead>
<tr>
<th><strong>RBAC profile</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Service Management</td>
<td>manage services. A service manager can manipulate any service in any way</td>
</tr>
<tr>
<td>Service Operator</td>
<td>administer services. A service operator can enable or disable any service.</td>
</tr>
</tbody>
</table>
<p>Further details: <a href="https://illumos.org/man/7/smf_security">smf_security(7)</a></p>
<h4 id="svcs">svcs</h4>
<p>This command is used to display services and their relevant status.
It is also used to provide a list of services that depend on a service, and it can also display a list of services that a service requires to operate.</p>
<p>All services generate log files and the location of a log file associated with a service can be obtained using this command.
A list of processes requirred by a service can be displayed using this command.</p>
<p><em>Usage</em>: <code>svcs [options] [FMRI]</code></p>
<table>
<thead>
<tr>
<th><strong>Option</strong></th>
<th><strong>Information to Display</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>enabled services</td>
</tr>
<tr>
<td><code>?</code></td>
<td>detailed help</td>
</tr>
<tr>
<td><code>a</code></td>
<td>all services</td>
</tr>
<tr>
<td><code>d [service]</code></td>
<td>services that this service requires</td>
</tr>
<tr>
<td><code>D [service]</code></td>
<td>services that require this service</td>
</tr>
<tr>
<td><code>l [service]</code></td>
<td>verbose information on service</td>
</tr>
<tr>
<td><code>L [service]</code></td>
<td>log file associated with service</td>
</tr>
<tr>
<td><code>o column,...</code></td>
<td>various information as defined by <em>columns</em></td>
</tr>
<tr>
<td><code>p [service]</code></td>
<td>processes associated with service</td>
</tr>
<tr>
<td><code>x</code></td>
<td>details on services that are enabled but not running or prevent other services</td>
</tr>
<tr>
<td></td>
<td>from running</td>
</tr>
<tr>
<td><code>v</code></td>
<td>more verbose output for some options</td>
</tr>
<tr>
<td><code>z [zone]</code></td>
<td>services in <code>zone</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>service:</strong> to specify a service use the FMRI, an FRMI instance or a FMRI pattern. Obtain a list of service FMRIs via <code>-o FMRI</code>.</li>
<li><strong>column:</strong> comma separated column names<ul>
<li><strong>desc:</strong>: description of service</li>
<li><strong>fmri:</strong>: Fault Management Resource Identifier</li>
<li><strong>inst:</strong>: service instance</li>
<li><strong>svc:</strong>: name of service</li>
<li><strong>state:</strong>: service state: uninitialised, offline, online, maintenance, disabled, degraded</li>
</ul>
</li>
</ul>
<h5 id="examples_1">Examples</h5>
<p><strong>List services and their status</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="w">    </span>svcs
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">    </span>svcs<span class="w"> </span>-a
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">    </span>svcs<span class="w"> </span>-o<span class="w"> </span>svc,state,desc
</span></code></pre></div>
<p><strong>Get printer information</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="w">    </span>&gt;<span class="w"> </span>svcs<span class="w"> </span>-o<span class="w"> </span>svcs,desc<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>print
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">    </span>application/print/service-selector<span class="w"> </span>print<span class="w"> </span>service<span class="w"> </span>selector
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span>application/cups/scheduler<span class="w"> </span>CUPS<span class="w"> </span>Print<span class="w"> </span>Spooler
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span>&gt;<span class="w"> </span>svcs<span class="w"> </span>-l<span class="w"> </span>scheduler
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">    </span>fmri<span class="w">         </span>svc:/system/scheduler:default
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">    </span>name<span class="w">         </span>default<span class="w"> </span>scheduling<span class="w"> </span>class<span class="w"> </span>configuration
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">    </span>enabled<span class="w">      </span><span class="nb">true</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">    </span>state<span class="w">        </span>online
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">    </span>next_state<span class="w">   </span>none
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="w">    </span>state_time<span class="w">   </span>March<span class="w"> </span><span class="m">27</span>,<span class="w"> </span><span class="m">2023</span><span class="w"> </span>at<span class="w"> </span><span class="m">08</span>:03:54<span class="w"> </span>AM<span class="w"> </span>CEST
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="w">    </span>logfile<span class="w">      </span>/var/svc/log/system-scheduler:default.log
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="w">    </span>restarter<span class="w">    </span>svc:/system/svc/restarter:default
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="w">    </span>dependency<span class="w">   </span>require_all/none<span class="w"> </span>svc:/system/filesystem/root<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="w">    </span>fmri<span class="w">         </span>svc:/application/cups/scheduler:default
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="w">    </span>name<span class="w">         </span>CUPS<span class="w"> </span>Print<span class="w"> </span>Spooler
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="w">    </span>enabled<span class="w">      </span><span class="nb">true</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a><span class="w">    </span>state<span class="w">        </span>online
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="w">    </span>next_state<span class="w">   </span>none
</span><span id="__span-36-20"><a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a><span class="w">    </span>state_time<span class="w">   </span>March<span class="w"> </span><span class="m">27</span>,<span class="w"> </span><span class="m">2023</span><span class="w"> </span>at<span class="w"> </span><span class="m">08</span>:03:57<span class="w"> </span>AM<span class="w"> </span>CEST
</span><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a><span class="w">    </span>logfile<span class="w">      </span>/var/svc/log/application-cups-scheduler:default.log
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a><span class="w">    </span>restarter<span class="w">    </span>svc:/system/svc/restarter:default
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a><span class="w">    </span>contract_id<span class="w">  </span><span class="m">42</span>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a><span class="w">    </span>dependency<span class="w">   </span>require_all/none<span class="w"> </span>file://localhost/etc/cups/cupsd.conf<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a><span class="w">    </span>dependency<span class="w">   </span>require_all/none<span class="w"> </span>svc:/system/filesystem/minimal<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a><span class="w">    </span>dependency<span class="w">   </span>optional_all/error<span class="w"> </span>svc:/network/loopback<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a><span class="w">    </span>dependency<span class="w">   </span>optional_all/error<span class="w"> </span>svc:/milestone/network<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span></code></pre></div>
<h4 id="svcadm">svcadm</h4>
<p>Use this command to change the status of a service: enable, disable, etc.</p>
<p><em>Usage</em>: <code>svcadm [options] [subcommand] [subcommand options] [service]</code></p>
<table>
<thead>
<tr>
<th><strong>options</strong></th>
<th><strong>purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>v</code></td>
<td>verbose</td>
</tr>
<tr>
<td><code>z [zone]</code></td>
<td>command applies to the zone specified</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>subsommand</strong></th>
<th><strong>subcommand option</strong></th>
<th><strong>Purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enable</code></td>
<td></td>
<td>enable <code>service</code> to <code>online</code> state</td>
</tr>
<tr>
<td></td>
<td><code>r</code></td>
<td>enable <code>service</code>, but also recursively enable its dependencies</td>
</tr>
<tr>
<td></td>
<td><code>t</code></td>
<td>enabling a service as persistent, even after rebooting.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>This option enables the service <em>only temporarily</em> until the next</td>
</tr>
<tr>
<td></td>
<td></td>
<td>system boot</td>
</tr>
<tr>
<td><code>disable</code></td>
<td></td>
<td>disable <code>service</code>  to <code>offline</code> state</td>
</tr>
<tr>
<td></td>
<td><code>c</code></td>
<td>add a comment which can be viewed by <code>svcs</code></td>
</tr>
<tr>
<td></td>
<td><code>t</code></td>
<td>disable service <em>temporarily</em>. The service will be enabled on ensuing boots</td>
</tr>
<tr>
<td><code>restart</code></td>
<td></td>
<td>restart <code>service</code></td>
</tr>
<tr>
<td><code>refresh</code></td>
<td></td>
<td>re-read service configuration, so</td>
</tr>
<tr>
<td></td>
<td></td>
<td>any configuration changes will take effect after a service <code>restart</code></td>
</tr>
<tr>
<td><code>clear</code></td>
<td></td>
<td>for a service in a <em>maintenance</em> state, signal the</td>
</tr>
<tr>
<td></td>
<td></td>
<td>service as repaired.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>for a service in a <em>degraded</em> state, attempt to bring the service online</td>
</tr>
</tbody>
</table>
<h5 id="examples_2">Examples</h5>
<p><strong>Restart a service</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="w">    </span>$<span class="w"> </span>date
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">    </span>XXXXX,<span class="w"> </span><span class="m">2023</span><span class="w"> </span>at<span class="w"> </span><span class="m">03</span>:26:50<span class="w"> </span>PM<span class="w"> </span>CEST
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">    </span><span class="c1"># svcadm restart application/cups/scheduler</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">    </span><span class="c1"># svcs -l application/cups/scheduler | grep state_time</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span>XXXXX,<span class="w"> </span><span class="m">2023</span><span class="w"> </span>at<span class="w"> </span><span class="m">03</span>:27:02<span class="w"> </span>PM<span class="w"> </span>CEST
</span></code></pre></div>
<p>First, we check the system time which is 3:26:30 PM.
We then restart the CUPS printer scheduler, then check the status of the service using <code>-l</code> and extract the service property <code>stat_time</code> to obtain the time at which the service became online.</p>
<h4 id="svccfg">svccfg</h4>
<p>This command is used to manage service configurations.</p>
<p><em>Usage</em>: <code>svccfg [options] -s [FMRI]</code></p>
<h4 id="svcprop">svcprop</h4>
<p>This is used to retrieve service instance properties.
It is also used to snapshots.
It can also be used to validate the existence of a property.</p>
<table>
<thead>
<tr>
<th><strong>options</strong></th>
<th><strong>purpose</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[service]</code></td>
<td>display all properties of <code>service</code></td>
</tr>
<tr>
<td><code>v</code></td>
<td>verbose</td>
</tr>
<tr>
<td><code>z [zone]</code></td>
<td>command applies to the zone specified</td>
</tr>
</tbody>
</table>
<p>Refer to the manual page for details: <a href="https://illumos.org/man/1/svcprop">scvprop(1)</a></p>
<h4 id="inetadm">inetadm</h4>
<h4 id="inetconv">inetconv</h4>
<h3 id="troubleshooting">Troubleshooting</h3>
<h4 id="basic-strategy">Basic Strategy</h4>
<p>Here is general methodology intended as an introduction in how to resolve a service that fails.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="w">    </span>svcs<span class="w"> </span>-xv
</span></code></pre></div>
<p>This command provides the following information:
- a possible reason for the failure
- location of the log file associated with the service
- references for further reading</p>
<p>Analysis during this step will frequently suffice to resolve your issue.
However, this is not alway the case.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="w">    </span>svcs<span class="w"> </span>-d<span class="w"> </span>FMRI
</span></code></pre></div>
<p>This command provides a list of services that the failed service requires.
The failed service might be failing due to a service that it depends on not operating appropriately, although its status is online and it <em>appears</em> to function correctly.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="w">    </span>svcs<span class="w"> </span>-l<span class="w"> </span>FMRI
</span></code></pre></div>
<p>While this command provides similar information provided by the first command, this command will also provide information on services that are online and but might exhibit dubious behaviour.
This command will provide information similar to the first command.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="w">    </span>svcs<span class="w"> </span>-d<span class="w"> </span>FMRI
</span></code></pre></div>
<p>Should analysis of the previous commands not be sufficient to resolve the issue, examination of the processes associated with suspicioous service might be necessary.
Use this command to list all processes associated with the service.
Use the tools from the previous section, System Monitoring, to scrutinise each process listed.</p>
<h5 id="examples_3">Examples</h5>
<p>To illustrate troubleshooting, we manipulate a service by removing a dependency:</p>
<ul>
<li>move a dependency file <code>/etc/cups/cupsd.conf</code></li>
<li><code>refresh</code> and <code>restart</code> the service</li>
<li>Use SMF commands in an attempt to reveal the cause of the failure</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="w">    </span><span class="c1"># svcs -l svc:/application/cups/scheduler:default</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">    </span>fmri<span class="w">         </span>svc:/application/cups/scheduler:default
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">    </span>name<span class="w">         </span>CUPS<span class="w"> </span>Print<span class="w"> </span>Spooler
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">    </span>enabled<span class="w">      </span><span class="nb">true</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">    </span>state<span class="w">        </span>online
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">    </span>next_state<span class="w">   </span>none
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">    </span>state_time<span class="w">   </span>XXXXX<span class="w"> </span>XX,<span class="w"> </span><span class="m">2023</span><span class="w"> </span>at<span class="w"> </span><span class="m">09</span>:18:13<span class="w"> </span>AM<span class="w"> </span>CEST
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">    </span>logfile<span class="w">      </span>/var/svc/log/application-cups-scheduler:default.log
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="w">    </span>restarter<span class="w">    </span>svc:/system/svc/restarter:default
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="w">    </span>contract_id<span class="w">  </span><span class="m">42</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="w">    </span>dependency<span class="w">   </span>require_all/none<span class="w"> </span>file://localhost/etc/cups/cupsd.conf<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="w">    </span>dependency<span class="w">   </span>require_all/none<span class="w"> </span>svc:/system/filesystem/minimal<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="w">    </span>dependency<span class="w">   </span>optional_all/error<span class="w"> </span>svc:/network/loopback<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="w">    </span>dependency<span class="w">   </span>optional_all/error<span class="w"> </span>svc:/milestone/network<span class="w"> </span><span class="o">(</span>online<span class="o">)</span>
</span></code></pre></div>
<p>The service is <code>online</code> and is operating satisfactorily.</p>
<p>Rename <code>/etc/cups/cupsd.conf</code>,  refresh the configuration and restart the service, will cause the service to fail:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="w">    </span><span class="c1"># mv /etc/cups/cupsd.conf /etc/cups/cupsd.conf.orig</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">    </span><span class="c1"># svcadm refresh svc:/application/cups/scheduler:default</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="c1"># svcadm restart svc:/application/cups/scheduler:default</span>
</span></code></pre></div>
<p>Obtain a list of failed services:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="w">    </span><span class="c1"># svcs -xv</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span>svc:/application/cups/scheduler:default<span class="w"> </span><span class="o">(</span>CUPS<span class="w"> </span>Print<span class="w"> </span>Spooler<span class="o">)</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">     </span>State:<span class="w"> </span>offline<span class="w"> </span>since<span class="w"> </span>March<span class="w"> </span><span class="m">29</span>,<span class="w"> </span><span class="m">2023</span><span class="w"> </span>at<span class="w"> </span><span class="m">07</span>:25:48<span class="w"> </span>PM<span class="w"> </span>CEST
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">    </span>Reason:<span class="w"> </span>Dependency<span class="w"> </span>file://localhost/etc/cups/cupsd.conf<span class="w"> </span>is<span class="w"> </span>absent.
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">       </span>See:<span class="w"> </span>http://illumos.org/msg/SMF-8000-E2
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">       </span>See:<span class="w"> </span>man<span class="w"> </span>-M<span class="w"> </span>/usr/share/man<span class="w"> </span>-s<span class="w"> </span><span class="m">8</span><span class="w"> </span>cupsd
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="w">       </span>See:<span class="w"> </span>/var/svc/log/application-cups-scheduler:default.log
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">    </span>Impact:<span class="w"> </span>This<span class="w"> </span>service<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>running.
</span></code></pre></div>
<p>We always obtain a reason which in our case pinpoints the error precisely.
This is not always the case.</p>
<h4 id="corrupt-service-configuration-revert-to-an-old-configuration">Corrupt Service Configuration: Revert to an Old Configuration</h4>
<p>SMF periodically takes snapshots of the service configuration so that it is alway possible to revert to a previous configuration.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="w">    </span><span class="c1"># List all cups services:</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">    </span>$<span class="w"> </span>svcs<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>cups
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">    </span>legacy_run<span class="w">     </span><span class="m">16</span>:33:35<span class="w"> </span>lrc:/etc/rc3_d/S99cups-browsed
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">    </span>online<span class="w">         </span><span class="m">14</span>:33:25<span class="w"> </span>svc:/application/cups/scheduler:default
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">    </span><span class="c1"># list snapshots associated with the cups service</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w">    </span>$<span class="w"> </span>svccfg<span class="w"> </span>-s<span class="w"> </span>svc:/application/cups/scheduler:default<span class="w"> </span>listsnap
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">    </span>initial
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w">    </span>last-import
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="w">    </span>running
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">    </span>start
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">    </span><span class="c1"># There are four snapshots available one of which is currently running.</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="w">    </span><span class="c1"># Lets suppose we had a corrupt config and would live to revert to the initial</span>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="w">    </span><span class="c1"># cups service configuration:</span>
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="w">    </span>$<span class="w"> </span>svccfg<span class="w"> </span>-s<span class="w"> </span>svc:/application/cups/scheduler:default<span class="w"> </span>revert<span class="w"> </span>initial
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="w">    </span><span class="c1"># re-read configuration</span>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a><span class="w">    </span>svcadm<span class="w"> </span>refresh<span class="w"> </span>svc:/application/cups/scheduler:default
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="w">    </span>svcadm<span class="w"> </span>restart<span class="w"> </span>svc:/application/cups/scheduler:default
</span></code></pre></div>
<h4 id="boot-failure">Boot Failure</h4>
<ul>
<li>On the boot menu, select =3= to load boot prompt</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="w">    </span><span class="m">3</span>.<span class="w"> </span>Escape<span class="w"> </span>to<span class="w"> </span>loader<span class="w"> </span>prompt
</span></code></pre></div>
<ul>
<li>Now boot without services by entering: <code>boot -m milestone=none</code>:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="w">    </span>OK<span class="w"> </span>boot<span class="w"> </span>-m<span class="w"> </span><span class="nv">milestone</span><span class="o">=</span>none
</span></code></pre></div>
<ul>
<li>Login as root and enable all services:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="w">    </span>svcadm<span class="w"> </span>milestone<span class="w"> </span>all
</span></code></pre></div>
<ul>
<li>Now the system will boot and fail. So use <code>svcs</code> to determine which services are failing:</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="w">    </span>svcs<span class="w"> </span>-a
</span></code></pre></div>
<h4 id="maintenance-mode">Maintenance Mode</h4>
<h2 id="configuring-and-tuning">Configuring and Tuning</h2>
<p>There are a few tools to configure and tune an OpenIndiana system.   One of the tools is sysding,  a tool that is used by the current OpenIndiana installer to setup static IP addresses when NWAM (automatic network configuration) is not used.</p>
<p>For more information on sysding, see the manpage and example config file :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1"># man sysding</span>
</span></code></pre></div>
<p>The configuration file is :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>/etc/sysding.conf
</span></code></pre></div>
<p>There is also a logfile :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>/var/log/sysding.log
</span></code></pre></div>
<p>For example a simple /etc/sysding.conf configuration file for a static IP is :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>setup_interface<span class="w"> </span>e1000g0<span class="w"> </span>v4<span class="w"> </span><span class="m">10</span>.0.2.16
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>setup_route<span class="w"> </span>default<span class="w"> </span><span class="m">10</span>.0.2.2
</span></code></pre></div>
<p>This service is meant to be run only once and sets a boolean flag config/finished.  In case you want to run sysding again, you'll have to force the finished flag to false :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>svccfg<span class="w"> </span>-s<span class="w"> </span>sysding:system
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>setprop<span class="w"> </span>config/finished<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>refresh
</span></code></pre></div>
<h3 id="configuring-a-ups">Configuring a UPS</h3>
<ul>
<li>NUT?</li>
</ul>
<h3 id="fault-management-fma">Fault management (FMA)</h3>
<p>&lt; place holder &gt;</p>
<h3 id="virtual-terminalsconsoles-vt">Virtual Terminals/Consoles (VT)</h3>
<p>Virtual Terminals/Virtual Consoles (VT) are used to switch between terminals and using system in text mode with <em>Ctrl+Alt+F1,F2..F8</em> key combinations.</p>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Switching to VTs using <em>Ctrl+Alt+Fn</em> during current desktop session (at <strong>VT7</strong>) can result in <strong>X server</strong> and <strong>lightdm</strong> (or <strong>gdm</strong>) restarting and stopping all applications running within it.
Currently, there could be problems with getting back to gdm/Xorg session if switching to VTs after gdm restart. Use <code>svcadm restart ligthdm</code> (or <code>svcadm restart gdm</code>) command again, to have lightdm/gdm Xorg session restarted at <strong>VT8</strong> (<em>Ctrl+Alt+F8</em>).</p>
</div>
</div>
<p>At fresh Openindiana install, VT/Consoles are <strong>not enabled by default</strong>. One needs to set up vtdaemon and console-login:vt2 (till :vt6) and enable <strong>vtdaemon</strong> options/hotkeys property:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>pfexec svcadm enable vtdaemon
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>pfexec svcadm enable console-login:vt2
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>pfexec svcadm enable console-login:vt3
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>pfexec svcadm enable console-login:vt4
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>pfexec svcadm enable console-login:vt5
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>pfexec svcadm enable console-login:vt6
</span></code></pre></div>
<p>Or do that in a one-liner Bash script: <code>for i in 2 3 4 5 6 ; do pfexec svcadm enable console-login:vt$i; done;</code></p>
<p>Then, enable options/hotkeys property (<em>Ctrl+Alt+Fn</em>) to switch VTs and refresh and restart <strong>vtdaemon</strong> service:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>pfexec svccfg -s vtdaemon setprop options/hotkeys=true
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>pfexec svcadm refresh vtdaemon
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>pfexec svcadm restart vtdaemon
</span></code></pre></div>
<p>Optionally, you can also disable VT consoles auto screen locking (recommended for personal use, not recommended on server): <code>pfexec svccfg -s vtdaemon setprop options/secure=false</code></p>
<p>The above was inspired by <a href="https://web.archive.org/web/20160424040330/https://blogs.oracle.com/DanX/entry/solaris_virtual_consoles">this blog by Danx on Virtual Consoles</a>.</p>
<h3 id="service-management-smf">Service management (SMF)</h3>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT: provide more detailed explanations.</p>
</div>
</div>
<p>List services:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>$ svcs # list (permanently) enabled services
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>$ svcs -a # list all services
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>$ svcs -vx # list faulty services
</span></code></pre></div>
<p>Get information about a service:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>$ svcs &lt;service name&gt; # one-line status
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>$ svcs -x &lt;service name&gt; # important information
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>$ svcs -d &lt;service name&gt; # check the service&#39;s dependencies
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>$ svcs -l &lt;service name&gt; # all the available information
</span></code></pre></div>
<p>Start a service:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a># svcadm enable &lt;service name&gt; # permanently enable/start
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a># svcadm enable -t &lt;service name&gt; # temporary start (won&#39;t survive a reboot)
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a># svcadm enable -r &lt;service name&gt; # permanently enable/start service along with its dependencies
</span></code></pre></div>
<p>Restart / reload a service:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a># svcadm refresh &lt;service name&gt; # reload the service&#39;s configuration
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a># svcadm restart &lt;service name&gt; # restart the service
</span></code></pre></div>
<h3 id="systems-logging-and-monitoring">Systems logging and monitoring</h3>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>Where to find the logs (<code>/var/log</code>, <code>/var/svc/log</code>).</li>
</ul>
</div>
</div>
<h2 id="illumos-boot-process">Illumos boot process</h2>
<p>&lt; place holder &gt;</p>
<h2 id="security">Security</h2>
<p>&lt; place holder &gt;</p>
<h2 id="zones">Zones</h2>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>Need to mention some of the changes to zone management...e.g..<ul>
<li>sys-unconfig gone.</li>
<li>sysding replaced syscfg</li>
<li>now have to have DNS, root password, etc. all configured inside the zone before being able to logon using <code>zlogin -C &lt;zonename&gt;</code>, otherwise have to do <code>zlogin &lt;zonename&gt;</code>.</li>
</ul>
</li>
</ul>
<p>So a fair amount of stuff has changed there.</p>
</div>
</div>
<p>Zones are an OpenIndiana feature that provides <a href="http://www.wikipedia.org/wiki/Operating_system-level_virtualization">operating system-level virtualization</a>. Each zone is managed as a completely separate OpenIndiana machine. Zones have very low overhead and are one of the most efficient forms of OS virtualization.</p>
<p>The global zone (GZ) is the operating system itself, which has hardware access. From the global zone, non-global zones (NGZ) are created and booted. Boot time for non-global zones is very fast, often a few seconds. The CPU, network, and memory resources for each zone can be controlled from the global zone, ensuring fair access to system resources. Disk space access is usually controlled by ZFS (with quotas and reservations if needed), as well as mounting of filesystem resources with NFS or lofs. As with other forms of virtualization, each zone is isolated from the other zones  zones cannot see processes or resources used in other zones. The low marginal cost of a zone allows large systems have tens or even hundreds of zones without significant overhead. The theoretical limit to the number of zones on a single platform is 8,192.</p>
<p>Different releases of (Open)Solaris used different packaging distribution method for the global zone. OpenIndiana zones use two basic brands - "ipkg" and "nlipkg", which are based on IPS Packaging. The brand determines how zone is initialized and how zone's processes are treated by kernel. Both type of zones represent a PKG image. "ipkg"-branded zones are tightly coupled with GZ. Image pakaging system (IPS) knows about ipkg-branded zones and can perform several actions simultaneously in GZ and NGZ. For example, you can update all your zones and GZ with a single "pkg update -r" command. IPS can ensure some depenencies between packages in GZ and NGZ. To allow this it cheks that NGZ's publishers are a superset of GZ's publishers and their properties are the same (for example, stickiness or repository location). As this is not always suitable for development zones, "nlipkg"-branded zones were introduced. "nlipkg"-branded zone behave like completely independent instance and IPS ignores them during operations in GZ.</p>
<p>An easy way to implement zones is to use a separate ZFS file system as the zone root's backing store. File systems are easy to create in ZFS and zones can take advantage of the ZFS snapshot and clone features. Due to the strong isolation between zones, sharing a file system must be done with traditional file sharing methods (eg NFS).</p>
<p>When each zone is created  it comes with a minimal set of packages, and from there you can add and use most packages and applications as required.</p>
<h3 id="zone-networking-model">Zone networking model</h3>
<p>OpenIndiana zones can use one of two networking models: a shared IP stack and an exclusive IP stack. There are pros and cons to each of them.</p>
<p>Low-level system networking components, such as the ipfilter firewall and the kernel IP routing tables attach to an "IP stack", and are thus either unique to a zone or shared by all zones with the one shared stack. There are also some other nuances, such as that the zones with the shared stack can communicate over IP directly, regardless of their subnetting and, to some extent, default firewall packet filtering (that has to be specially configured), while exclusive-IP zones with addresses in different subnets have to communicate over external routers and are subject to common firewall filtering.</p>
<p>The global zone defines which physical networks and VLANs the NGZ has access to, and hands down the predefined networking interfaces (the NGZ can not use or create other interfaces). Also, while shared networking allows to configure and attach (or detach) network interfaces from GZ to the NGZ "on the fly", changes in exclusive networking require reboot of the zone to propagate device delegation.</p>
<p>A zone with an exclusive IP stack can have all the benefits of dedicated hardware networking, including a firewall, access to promiscuous sniffing, routing, configuration of its own IP address (including use of DHCP and static network addressing), etc. This requires a fully dedicated NIC. Usually this is a VNICs - a virtual adapter with own MAC address, that operate as if the VNIC was plugged directly into local LAN in a particular (or default) VLAN. Note also that the local zones with an exclusive IP stack are not subject to the host's shared-stack firewall.</p>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that if you create zone in VM, the hypervisor can require you to provide some information about its mac addresses. For example, if you configure bridged networking on VirtualBox running on OpenIndiana, you must set secondary-macs property of the VNIC, delegated to VM, to the set of mac addresses  of VNICs created inside VMs and enable promiscous mode on VirtualBox network adapter.</p>
</div>
</div>
<h3 id="quick-setup-example">Quick Setup Example</h3>
<p>Zone creation consists of two steps - creating zone configuration and zone installation or cloning. Zone configuration determines basic parameters, such as zone's root location and provided resources.
Zone configuration is performed using zonecfg tool, zone administration (for example, installation) is performed using zoneadm tool.</p>
<p>For example, we create a simple zone with shared networking model:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a># zonecfg -z example
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>example: No such zone configured
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>Use &#39;create&#39; to begin configuring a new zone.
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>zonecfg:example&gt; create
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>zonecfg:example&gt; add net
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>zonecfg:example:net&gt; set physical=e1000g0
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>zonecfg:example:net&gt; set address=192.168.0.10/24
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a>zonecfg:example:net&gt; end
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>zonecfg:example&gt; set zonepath=/zones/example
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>zonecfg:example&gt; verify
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a>zonecfg:example&gt; commit
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a>zonecfg:example&gt; exit
</span></code></pre></div>
<p>Here <code>create</code> puts you inside the zone configuration program where you can change and update settings particular to the zone specified with -z.
<code>zonecfg</code> break different resource groups of data, you add a new resource with add.
The next block adds ressource "net", configuring network in default <code>shared</code> ip-type mode. It allows zone to share IP stack with GZ. If you want to
get dedicated nic in NGZ, you have to use <code>set ip-type=exclusive</code>. In exclusive mode zone has complete control over network interface and you
can't assigned address in zonecfg prompt.
After network configuration <code>zonepath</code> is set. It's a location for zone's root file system, which should be a ZFS filesystem.
The <code>verify</code> command checks that no mistakes were made.
Finally changes are committed (saved to zone configuration file).</p>
<p>If you want to use dedicated networking for your zone, you should create VNIC and delegate it to the zone.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a># dladm create-vnic -l e1000g0 vnic0
</span></code></pre></div>
<p>If you want to specify VLAN id for VNIC, use <code>-v</code> <code>dladm create-vnic</code> option:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a># dladm create-vnic -l e1000g0 -v 123 vnic0
</span></code></pre></div>
<p>Now you can create your zone and delegate VNIC to it (note that we set zone's <code>ip-type</code> to <code>exclusive</code>):</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a># zonecfg -z example
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>example: No such zone configured
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>Use &#39;create&#39; to begin configuring a new zone.
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>zonecfg:example&gt; create
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>zonecfg:example&gt; set ip-type=exclusive
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>zonecfg:example&gt; add net
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>zonecfg:example:net&gt; set physical=vnic0
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>zonecfg:example:net&gt; end
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>zonecfg:example&gt; set zonepath=/zones/example
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>zonecfg:example&gt; verify
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>zonecfg:example&gt; commit
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a>zonecfg:example&gt; exit
</span></code></pre></div>
<p>After configuring a zone you can install it with <code>zoneadm install</code> subcommand:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a># zoneadm -z example install
</span></code></pre></div>
<p>During installation pkg image rooted at $zonepath/root is created and minimal set of packages is installed to the image.
When installation finishes, zone can be booted with <code>zoneadm -z example boot</code> command. If you want your zone to boot automatically during system startup,
you should set autoboot parameter to true during zone configuration:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>zonecfg:example&gt; set autoboot=true
</span></code></pre></div>
<p>Once zone is booted you can log in locally with <code>zlogin example</code>. If you created zone with dedicated network adapter, you should configure it inside zone.</p>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note, that on first zone boot sysding(1M) will set root's password to NP. Before this happened you will not be able to login to zone with zlogin, so this command will not work on early startup stage.</p>
</div>
</div>
<h3 id="system-repository-configuration">System repository configuration</h3>
<p>On OpenIndiana it is possible to allow NGZs to access configured publishers via GZ proxy service (so-called zone proxy daemon).
This can be useful for sharing pkg cache between zones or to provide network access for performing updates to otherwise restricted zone environment (i.e. to zone without Internet access).</p>
<p>The functionality is provided by series of services in GZ and NGZs. In GZ two services are running: system repository service and zones proxy daemon (see <code>pkg.sysrepo(1M)</code>). In NGZ zones proxy client
communicates with GZ's zone proxy daemon.
System repository service <code>svc:/application/pkg/system-repository</code>  is responsible for providing access to the package repositories configured in a reference image through a centralized proxy.
Zones proxy daemon service <code>svc:/application/pkg/zones-proxyd</code> starts on system boot and registers door in each running ipkg-branded zone (the door is created at <code>/var/tmp/zoneproxy_door</code> path).
Later, on zone startup or shutdown /usr/lib/zones/zoneproxy-adm is used to notify zones-proxyd, so that it could create the door for the zone or to cleanup it.
Zones proxy daemon client <code>svc:/application/pkg/zones-proxy-client:default</code> runs in NGZ and talks to GZ's zones-proxyd via created door.</p>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note, you can't use system repository with nlipkg-branded zones.</p>
</div>
</div>
<p>IPS determines if it should use zones proxy client in zone based on image's <code>use-system-repo</code> property (defaults to False).</p>
<p>To configure your system to use system repository, perform the following actions.</p>
<p>1) In global zone:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a># pkg install pkg:/package/pkg/system-repository pkg:/package/pkg/zones-proxy
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a># svcadm enable svc:/application/pkg/system-repository:default
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a># svcadm enable svc:/application/pkg/zones-proxyd:default
</span></code></pre></div>
<p>2) In non-global zone:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a># pkg install pkg:/package/pkg/zones-proxy
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a># svcadm enable svc:/application/pkg/zones-proxy-client:default
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a># pkg set-property use-system-repo True
</span></code></pre></div>
<p>After this in NGZ's publisher description you'll see system-repository location:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a># pkg publisher
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>PUBLISHER                   TYPE     STATUS P LOCATION
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>openindiana.org (non-sticky, syspub) origin   online T &lt;system-repository&gt;
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>hipster-encumbered (syspub)     origin   online T &lt;system-repository&gt;
</span></code></pre></div>
<p>You can check if your configuration works by issuing <code>pkg refresh</code> command in the zone. <code>pkg(1M)</code> should contact repository indirectly via zones-proxy-client.</p>
<p>To revert your zone to proxy-less configuration, run</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a># pkg set-property use-system-repo False
</span></code></pre></div>
<h3 id="troubleshooting_1">Troubleshooting</h3>
<p>Zone configuration and management operations can fail for a number of reasons, sometimes obscure.
This section contains information on how to solve different well-known issues.</p>
<h4 id="fixing-zone-installation-issues">Fixing zone installation issues</h4>
<p>Zones on OpenIndiana use ZFS features to manage boot environments.
Zone's root and its parent directory should be a ZFS dataset.
It's not enough for zone's root (or its parent directory) to be just a directory on ZFS filesystem.
If you try to create a zone which root doesn't satisfy this requirement, you can get the following error:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a># zoneadm -z example install
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>Sanity Check: Looking for &#39;entire&#39; incorporation.
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>ERROR: the zonepath must be a ZFS dataset.
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>The parent directory of the zonepath must be a ZFS dataset so that the
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>zonepath ZFS dataset can be created properly.
</span></code></pre></div>
<p>To fix this, you can just uninstall the zone and create its root dataset manually:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a># zoneadm -z example uninstall
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>Are you sure you want to uninstall zone example (y/[n])? y
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a># zfs create rpool/zones/example
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a># chmod 700 /zones/example
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a># zoneadm -z example install
</span></code></pre></div>
<h2 id="storage">Storage</h2>
<p>&lt; place holder &gt;</p>
<h3 id="mounting-file-systems">Mounting file systems</h3>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>Need a walkthrough of mounting options for other filesystems...FAT, UFS, etc.</li>
</ul>
</div>
</div>
<h4 id="mounting-and-unmounting-iso-images">Mounting and Unmounting ISO images</h4>
<p>One can use <a href="https://illumos.org/man/1M/lofiadm">lofiadm(1M)</a> to mount ISO images by attaching them to a block device.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>pfexec lofiadm -a /path/to/foo.iso /dev/lofi/1
</span></code></pre></div>
<p>When the above line is repeated for several ISO images, issue the <code>lofiadm</code> command to list which ISO images are attached to which block devices.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>pfexec<span class="w"> </span>lofiadm
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>Block<span class="w"> </span>Device<span class="w"> </span>File<span class="w"> </span>Options
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>/dev/lofi/1<span class="w"> </span>/home/scarcry/foo.iso<span class="w"> </span>-
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>/dev/lofi/2<span class="w"> </span>/home/scarcry/bar.iso<span class="w"> </span>-
</span></code></pre></div>
<p>Use the <a href="https://illumos.org/man/1M/mount">mount(1M)</a> command to mount an image:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>pfexec mount -F hsfs -o ro /dev/lofi/1 /mnt
</span></code></pre></div>
<p>Check the mounted image by issuing <code>ls</code> on the mount point.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>ls /mnt
</span></code></pre></div>
<p>To unmount and detach the image(s):</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>pfexec umount /mnt
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>pfexec lofiadm -d /dev/lofi/1
</span></code></pre></div>
<h4 id="mounting-ntfs-volumes-3rd-party-support">Mounting NTFS Volumes - 3rd party support</h4>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For removable storage devices, first make sure your external disk drive is connected and powered on.</p>
<p>To list attached removable storage devices: <code>rmformat -l</code></p>
</div>
</div>
<p>Verify the pX partition number that contains the NTFS filesystem, typically "p1", using fdisk. Even though it may seem counterintuitive, include the partition number "p0" as shown by rmformat in fdisk inquiries.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>pfexec fdisk /dev/rdsk/c6t0d0p0
</span></code></pre></div>
<h5 id="additional-software-installation-and-configuration">Additional software installation and configuration</h5>
<p>NTFS and FUSE support is provided by Tuxera's NTFS-3G project that aims at providing a stable NTFS driver for several operating systems.</p>
<p>It is made possible thanks to Jean-Pierre Andr, on Openindiana page:  <a href="http://jp-andre.pagesperso-orange.fr/openindiana-ntfs-3g.html">http://jp-andre.pagesperso-orange.fr/openindiana-ntfs-3g.html</a> Follow instructions on this page to install. Please install 64-bit package on 64-bit installations.</p>
<h5 id="mounting-the-ntfs-filesystem">Mounting the NTFS filesystem</h5>
<p>Now mount the NTFS partition using:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>pfexec<span class="w"> </span>ntfs-3g<span class="w"> </span>/dev/dsk/c6t0d0p1<span class="w"> </span>/mnt/backup/
</span></code></pre></div>
<p>You can now also add a vfstab entry like so:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>/dev/dsk/c6t0d0p1<span class="w"> </span>/dev/rdsk/c6t0d0p1<span class="w"> </span>/mnt/backup<span class="w"> </span>ntfs-3g<span class="w"> </span>-<span class="w"> </span>no<span class="w"> </span>-
</span></code></pre></div>
<h3 id="configuring-openindiana-as-an-iscsi-target-server-comstar">Configuring OpenIndiana as an ISCSI Target Server - (COMSTAR)</h3>
<p>&lt; Place holder for content &gt;</p>
<h3 id="system-backups">System backups</h3>
<p>OpenIndiana offers several backup solutions.
Here are just a few of them:</p>
<ul>
<li><a href="https://borgbackup.readthedocs.io/en/stable/">Borg Backup</a></li>
<li><a href="http://blog.bacula.org/">Bacula</a></li>
<li>Time-Slider</li>
<li><a href="http://www.nongnu.org/rdiff-backup/">rdiff-backup</a></li>
<li>Rsync</li>
<li><a href="https://labs.omniti.com/labs/zetaback">Zetaback</a></li>
<li>ZFS exports</li>
<li>cpio</li>
<li>tar, zip, etc.</li>
</ul>
<h3 id="zfs">ZFS</h3>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<p>Gotcha's such as the following:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>&lt;e^ipi&gt; don&#39;t suppose there&#39;s any solution to this:
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a>&lt;e^ipi&gt; cannot replace 1509280528045021472 with /dev/dsk/c0t5000C5009204EB9Bd0s0: devices have different sector alignment
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>&lt;tsoome&gt; thats 512 versus non-512 sector issue
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a>&lt;tsoome&gt; you need to build new pool based on larger sector
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a>&lt;tsoome&gt; if its mirror, you can attach 512B disk to 4k pool, but not vice versa...
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a>&lt;e^ipi&gt; well, damn.
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a>&lt;tsoome&gt; that error message is too confusing, should be replaced by more clear one;)
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a>&lt;e^ipi&gt; I swear this pool is already mix &amp; match, freebsd complained about it
</span><span id="__span-81-9"><a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>&lt;e^ipi&gt; (but still used it)
</span><span id="__span-81-10"><a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a>&lt;tsoome&gt; there is that thing that ashift is vdev property;)
</span><span id="__span-81-11"><a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a>&lt;tsoome&gt; not pool property (one reason why that linux zpool create ashift= option is bad)
</span><span id="__span-81-12"><a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a>&lt;tsoome&gt; or sort of bad anyhow
</span></code></pre></div>
</div>
</div>
<h4 id="importing-zfs-disks">Importing ZFS disks</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>Talk about the ZFS import command.</li>
</ul>
</div>
</div>
<h4 id="how-does-one-mirror-their-root-zpool">How does one mirror their root zpool?</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>Adding a 2nd disk to the root pool</li>
</ul>
</div>
</div>
<h4 id="how-does-one-create-additional-zpools">How does one create additional zpools?</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>zpool create command<ul>
<li>Mirrors</li>
<li>Raidz</li>
</ul>
</li>
</ul>
</div>
</div>
<h4 id="modifying-zpool-settings-and-attributes">Modifying zpool settings and attributes</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>zpool get/set commands</li>
</ul>
</div>
</div>
<h4 id="modifying-zfs-file-system-settings-and-attributes">Modifying zfs file system settings and attributes</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>zfs get/set commands</li>
</ul>
</div>
</div>
<h4 id="how-does-one-create-additional-zfs-datasets">How does one create additional zfs datasets?</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>zfs create command</li>
</ul>
</div>
</div>
<h4 id="configuring-system-swap">Configuring system swap</h4>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>zfs set command</li>
<li>swap -l</li>
</ul>
</div>
</div>
<h2 id="virtualization">Virtualization</h2>
<p>&lt; Place holder &gt;</p>
<h3 id="openindiana-as-a-virtualization-host-server">OpenIndiana as a virtualization host server</h3>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<ul>
<li>Qemu-KVM (KVM) walkthrough<ul>
<li>illumos KVM port does not support AMD processors.</li>
<li>Intel processors require EPT support.</li>
</ul>
</li>
<li>Virtualbox walkthrough<ul>
<li>There is no package for this yet, but folks do have it working, see the wiki for details.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<p>In a nutshell, most modern Intel processors such as i3, i5, i7, and Xeon provide EPT support.
Most older processors such as Core2duo and Core2Quad lack EPT support, and a few of them lack virtualization support at all.
You can check your processor for EPT support via the following link: <a href="http://ark.intel.com/Products/VirtualizationTechnology">http://ark.intel.com/Products/VirtualizationTechnology</a></p>
</div>
</div>
<h2 id="localization">Localization</h2>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<p>Possible resources to help write this section:</p>
<ul>
<li><a href="https://wiki.openindiana.org/oi/4.4+Localization">https://wiki.openindiana.org/oi/4.4+Localization</a></li>
<li><a href="https://docs.oracle.com/cd/E23824_01/html/E26033/glmen.html">https://docs.oracle.com/cd/E23824_01/html/E26033/glmen.html</a></li>
</ul>
</div>
</div>
<h2 id="dtrace">Dtrace</h2>
<p>&lt; Place Holder &gt;</p>
<h2 id="configuring-networking">Configuring Networking</h2>
<h3 id="automatic-configuration-nwam">Automatic Configuration (NWAM)</h3>
<p>During installation of OpenIndiana, there are three options to configure networking : Automatic, Manual (static IP), and None.</p>
<p>Option Autamatic enables NWAM and configures all interfaces automatically.</p>
<p>Network Auto-Magic (NWAM) manages network interfaces as they are dynamically added or removed to or from the system, using network profiles, and is able to change network settings on the fly.</p>
<p>NWAM is suitable for servers, laptops, desktops and workstations alike, to automatically configure all wired or wireless network interfaces.</p>
<p>Option Manual disables NWAM and creates a /etc/sysding.conf file to setup static IP addresses.</p>
<p>Option None can be used to configure networking manually, without NWAM, after installation.</p>
<h3 id="changing-from-nwam-to-manual-configuration">Changing from NWAM to Manual Configuration</h3>
<p>If during install you enabled NWAM, and if you want to disable NWAM you can proceed as follows :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="c1"># svcadm disable physical:nwam</span>
</span></code></pre></div>
<p>Define your IP/hostname in <code>/etc/hosts</code>. For example:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="m">192</span>.168.1.22<span class="w"> </span>hostname<span class="w"> </span>hostname.local<span class="w"> </span>localhost<span class="w"> </span>loghost
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="c1"># Subsittude 192.168.1.22 for YOUR IP</span>
</span></code></pre></div>
<p>Enable the default physical service with <code>svcadm</code> and configure the <code>interface</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="c1"># svcadm enable physical:default</span>
</span></code></pre></div>
<p>There are multiple ways to configure the interface : using sysding or directly with ipadm.</p>
<p>For more information on sysding, see the section on Configuring and Tuning.</p>
<p>To configure an interface with ipadm:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="c1"># ipadm create-addr -T static -a local=192.168.1.22/24 bge0/v4static</span>
</span></code></pre></div>
<p>or</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="c1"># ipadm create-addr -T dhcp bge0/dhclient</span>
</span></code></pre></div>
<p>The previous example sets up DHCP without using NWAM.  NWAM is more than DHCP, because NWAM automatically configures any new interfaces, while the above way to manually setup DHCP is fixed for a specific interface.</p>
<p>If you do not know what the interface name is (bge0 in this case); then type in</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>$<span class="w"> </span>dladm<span class="w"> </span>show-link
</span></code></pre></div>
<p>or:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>$<span class="w"> </span>kstat<span class="w"> </span>-c<span class="w"> </span>net<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>net
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="c1"># look for hme0, bge0, e1000g0 or soemthing that resembles the driver in use.</span>
</span></code></pre></div>
<p>Add gateway</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="c1"># route -p add default 192.168.1.121</span>
</span></code></pre></div>
<p>or</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="c1"># nano /etc/defaultrouter</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="c1"># Enter in your gateways IP</span>
</span></code></pre></div>
<p>or use the /etc/sysding.conf file to configure a default router and DNS servers.</p>
<p>Set DNS server(s)</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="c1"># nano /etc/resolv.conf</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="c1"># Enter in the DNS server IP(s)</span>
</span><span id="__span-91-4"><a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>nameserver<span class="w"> </span><span class="m">192</span>.168.1.121
</span></code></pre></div>
<p>or</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="c1"># echo &quot;nameserver 192.168.1.121&quot; &gt;&gt; /etc/resolv.conf</span>
</span></code></pre></div>
<p>Restart</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="c1"># reboot</span>
</span></code></pre></div>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>IF you cannot ping an external IP (e.g. google.com) run this command and try again.</p>
</div>
</div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="c1"># cp /etc/nsswitch.dns /etc/nsswitch.conf</span>
</span></code></pre></div>
<p>credit for this section of the docs go to <a href="https://www.reddit.com/user/127b">/u/127b</a></p>
<h3 id="more-on-automatic-configuration-nwam">More on Automatic Configuration (NWAM)</h3>
<p>The following is a more in depth discussion of NWAM, which normally works without any user interaction, but NWAM can be customized using profiles by the user.</p>
<h4 id="using-nwam-configuration-tools">Using NWAM configuration tools</h4>
<p>Usually NWAM configuration is done via GUI <code>nwam-manager</code> applet and <code>nwam-manager-properties</code> program.</p>
<p>From CLI all configuration can be done using two tools, <code>nwamcfg</code> to configure network profiles and <code>nwamadm</code> to manage them.</p>
<p>On its backend, NWAM relies on <code>nwamd</code>, the NWAM policy engine daemon and <code>netcfgd</code>, the NWAM repository daemon.</p>
<p>Access to the command line and GUI tools is controlled via security profiles 'Network Autoconf Admin' and 'Network Autoconf user'.</p>
<p>To create NWAM profile use <code>nwamcfg</code> tool.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a># nwamcfg
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>nwamcfg&gt; create ncp Abroad
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>nwamcfg:ncp:Abroad&gt; end
</span></code></pre></div>
<p>Now you can see a new profile in the list of NCPs:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>nwamcfg&gt; list
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>NCPs:
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>Abroad
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>Automatic
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a>Locations:
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>Automatic
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>NoNet
</span><span id="__span-96-8"><a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>User
</span><span id="__span-96-9"><a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>nwamcfg&gt;
</span></code></pre></div>
<p>The network interface to be managed under the new profile can be set and configured with <code>create ncu</code> command:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a># nwamcfg
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>nwamcfg&gt; select ncp Abroad
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>nwamcfg:ncp:Abroad&gt; create ncu phys e1000g0
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a>Created ncu &#39;e1000g0&#39;. Walking properties ...
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>activation-mode (manual) [manual|prioritized]&gt; prioritized
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>enabled (true) [true|false]&gt;
</span><span id="__span-97-7"><a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>priority-group&gt; 0
</span><span id="__span-97-8"><a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a>priority-mode [exclusive|shared|all]&gt; exclusive
</span><span id="__span-97-9"><a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a>link-mac-addr&gt;
</span><span id="__span-97-10"><a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a>link-autopush&gt;
</span><span id="__span-97-11"><a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a>link-mtu&gt;
</span><span id="__span-97-12"><a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt;
</span></code></pre></div>
<p>Most important here is the <code>activation-mode</code>, which states if the profile is to be automatically set based on certain policies or if it is to be manually set using nwamadm.
The latter should be most likely the case in a server environment.
The <code>priority-group</code> and <code>priority-mode</code> here are set to (0 / exclusive).
This says that the profile is for wired access and will always be the only active one at a time.</p>
<p>If after listing the changes you are satisfied with the configuration, permanently store it using <code>commit</code> command:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt; list
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>ncu:e1000g0
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a> type link
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a> class phys
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a> parent &quot;Abroad&quot;
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a> activation-mode prioritized
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a> enabled true
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a> priority-group 0
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a> priority-mode exclusive
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt; commit
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a>Committed changes
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt; end
</span></code></pre></div>
<p>After an interface has been assigned to the profile, its IP configuration has to be defined:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>nwamcfg:ncp:Abroad&gt; create ncu ip e1000g0
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>Created ncu &#39;e1000g0&#39;. Walking properties ...
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>enabled (true) [true|false]&gt;
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a>ip-version (ipv4,ipv6) [ipv4|ipv6]&gt; ipv4
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a>ipv4-addrsrc (dhcp) [dhcp|static]&gt; static
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>ipv4-addr&gt; 192.168.100.100
</span><span id="__span-99-7"><a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a>ipv4-default-route&gt; 192.168.100.1
</span><span id="__span-99-8"><a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt; list
</span><span id="__span-99-9"><a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a>ncu:e1000g0
</span><span id="__span-99-10"><a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a> type interface
</span><span id="__span-99-11"><a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a> class ip
</span><span id="__span-99-12"><a id="__codelineno-99-12" name="__codelineno-99-12" href="#__codelineno-99-12"></a> parent &quot;Abroad&quot;
</span><span id="__span-99-13"><a id="__codelineno-99-13" name="__codelineno-99-13" href="#__codelineno-99-13"></a> enabled true
</span><span id="__span-99-14"><a id="__codelineno-99-14" name="__codelineno-99-14" href="#__codelineno-99-14"></a> ip-version ipv4
</span><span id="__span-99-15"><a id="__codelineno-99-15" name="__codelineno-99-15" href="#__codelineno-99-15"></a> ipv4-addrsrc static
</span><span id="__span-99-16"><a id="__codelineno-99-16" name="__codelineno-99-16" href="#__codelineno-99-16"></a> ipv4-addr &quot;192.168.100.100&quot;
</span><span id="__span-99-17"><a id="__codelineno-99-17" name="__codelineno-99-17" href="#__codelineno-99-17"></a> ipv4-default-route &quot;192.168.100.1&quot;
</span><span id="__span-99-18"><a id="__codelineno-99-18" name="__codelineno-99-18" href="#__codelineno-99-18"></a> ipv6-addrsrc dhcp,autoconf
</span><span id="__span-99-19"><a id="__codelineno-99-19" name="__codelineno-99-19" href="#__codelineno-99-19"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt;
</span></code></pre></div>
<p>As you can see, the profile uses a static IP address and, for simplicity reasons, only provides IPv4 networking.
Again, if you're happy with the results, commit them.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt; commit
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>Committed changes
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt;
</span></code></pre></div>
<p>As it stands, now you have defined a pysical and ip layer attached to a network profile:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>nwamcfg:ncp:Abroad:ncu:e1000g0&gt; end
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>nwamcfg:ncp:Abroad&gt; list
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>NCUs:
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a> phys e1000g0
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a> ip e1000g0
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>nwamcfg:ncp:Abroad&gt;exit
</span></code></pre></div>
<p>To activate the profile, you use nwamadm.
First of all, check for the current situation:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a># nwamadm list
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>TYPE     PROFILE    STATE
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>ncp      Abroad     disabled
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>ncp      Automatic  online
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>ncu:phys e1000g0    online
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a>ncu:ip   e1000g0    online
</span><span id="__span-102-7"><a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a>loc      Automatic  online
</span><span id="__span-102-8"><a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a>loc      NoNet      offline
</span><span id="__span-102-9"><a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a>loc      User       disabled
</span></code></pre></div>
<p>As you can see, Automatic is the active profile while Abroad is currently disabled.
We can change that easily, but be aware that you might lock yourself out if you are connected via SSH when changing the profile!</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a># nwamadm enable -p ncp Abroad
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>Enabling ncp &#39;Abroad&#39;
</span></code></pre></div>
<p>To check if the change has worked, you can use nwam again, and also ifconfig should show that interface is up:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a># nwamadm list
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>TYPE PROFILE STATE
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>ncp Abroad online
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a>ncu:phys e1000g0 online
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>ncu:ip e1000g0 online
</span><span id="__span-104-6"><a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>ncp Automatic disabled
</span><span id="__span-104-7"><a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>loc Automatic online
</span><span id="__span-104-8"><a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>loc NoNet offline
</span><span id="__span-104-9"><a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a>loc User disabled
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a># ifconfig e1000g0
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>e1000g0: flags=1000843&lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4&gt; mtu 1500 index 8
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>inet 192.168.100.100 netmask ffffff00 broadcast 192.168.100.255
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>ether 0:c:29:56:46:73
</span></code></pre></div>
<p>If you want to revert to default <code>Automatic</code> ncp, use the following command:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a># nwamadm enable -p ncp Automatic
</span></code></pre></div>
<p>Although it is possible to directly modify profiles using an editor, it is not advisable and will be hardly necessary, anyway.
One of the coolest features of NWAM tools is that they can be completely scripted.
All steps above could also be put in one line:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a># nwamcfg &quot;create ncp Abroad;create ncu phys e1000g0;set activation-mode=manual;set enabled=true;set priority-group=0;set priority-mode=exclusive;end;create ncu ip e1000g0;set enabled=true;set ip-version=ipv4;set ipv4-addrsrc=static;set ipv4-addr=192.168.100.100;set ipv4-default-route=192.168.100.1;commit&quot;
</span></code></pre></div>
<p>Or, more nicely formatted, commented and stored in a file:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>#
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a># Profile for use on the road
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>#
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a># Created on 13/01/2013 by S. Mueller-Wilken
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>#
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>create ncp Abroad
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a># Create physical interface definition for 1st network card
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a>create ncu phys e1000g0
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a>set activation-mode=manual
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a>set enabled=true
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a>set priority-group=0
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a>set priority-mode=exclusive
</span><span id="__span-108-14"><a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a>end
</span><span id="__span-108-15"><a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a>
</span><span id="__span-108-16"><a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a># Create IP configuration for first network card
</span><span id="__span-108-17"><a id="__codelineno-108-17" name="__codelineno-108-17" href="#__codelineno-108-17"></a>create ncu ip e1000g0
</span><span id="__span-108-18"><a id="__codelineno-108-18" name="__codelineno-108-18" href="#__codelineno-108-18"></a>set enabled=true
</span><span id="__span-108-19"><a id="__codelineno-108-19" name="__codelineno-108-19" href="#__codelineno-108-19"></a>set ip-version=ipv4
</span><span id="__span-108-20"><a id="__codelineno-108-20" name="__codelineno-108-20" href="#__codelineno-108-20"></a>set ipv4-addrsrc=static
</span><span id="__span-108-21"><a id="__codelineno-108-21" name="__codelineno-108-21" href="#__codelineno-108-21"></a>set ipv4-addr=192.168.100.100
</span><span id="__span-108-22"><a id="__codelineno-108-22" name="__codelineno-108-22" href="#__codelineno-108-22"></a>set ipv4-default-route=192.168.100.1
</span><span id="__span-108-23"><a id="__codelineno-108-23" name="__codelineno-108-23" href="#__codelineno-108-23"></a>
</span><span id="__span-108-24"><a id="__codelineno-108-24" name="__codelineno-108-24" href="#__codelineno-108-24"></a># Commit the settings
</span><span id="__span-108-25"><a id="__codelineno-108-25" name="__codelineno-108-25" href="#__codelineno-108-25"></a>commit
</span></code></pre></div>
<p>This file can then be read by nwamcfg:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a># nwamcfg -f abroad.cfg
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>Configuration read.
</span></code></pre></div>
<p>While there is no longer a need to fiddle around in /etc/nwam, the configuration is still completely there, as can be easily verified:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a># ls /etc/nwam
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>loc loc.conf ncp-Abroad.conf ncp-Automatic.conf
</span></code></pre></div>
<p>All configuration is placed in readable ASCII files so that configuration from a global zone is possible:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a># cat /etc/nwam/ncp-Abroad.conf
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>link:e1000g0 type=uint64,0;class=uint64,0;parent=string,Abroad;enabled=boolean,true;activation-mode=uint64,4;priority-group=uint64,0;priority-mode=uint64,0;
</span><span id="__span-111-3"><a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a>interface:e1000g0 type=uint64,1;class=uint64,1;parent=string,Abroad;enabled=boolean,true;ipv6-addrsrc=uint64,0,1;ip-version=uint64,4;ipv4-addrsrc=uint64,2;ipv4-default-route=string,192.168.100.1;ipv4-addr=string,192.168.100.100;
</span></code></pre></div>
<h4 id="network-automagic-online-help">Network automagic online help</h4>
<p>Comprehensive and fully illustrated online help for using NWAM is available by right clicking the NWAM tray icon and selecting <em>Help</em>.
This opens help browser.</p>
<h4 id="troubleshooting-nwam">Troubleshooting NWAM</h4>
<p>If NWAM is already configured and fails to connect to a wireless network try restarting the service.</p>
<p>For example:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="c1"># svcadm restart nwam</span>
</span></code></pre></div>
<p>Sometimes the location gets set to <em>NoNet</em> and it's nessessary to manually change the location to <em>Automatic</em>.</p>
<p>When the location setting is configured to <em>Switch Locations Automatically</em>, it's not possible to change the location.
This is resolved by reconfiguring the location to allow manual switching.
To perform this task, do the following:</p>
<p>Right click the NWAM tray icon and select <strong><em>Location</em> &gt; <em>Switch Locations Manually</em></strong>.
Right click the NWAM tray icon and select <strong><em>Location</em> &gt; <em>Automatic</em></strong>.</p>
<h2 id="clustering-with-open-ha-cluster">Clustering with Open HA Cluster</h2>
<div class="info">
<div class="admonition info">
<p class="admonition-title">Documentation Team</p>
<p>ITEMS TO WRITE ABOUT:</p>
<p>See old sun docs</p>
<ul>
<li><http://docs.oracle.com/cd/E19735-01/></li>
</ul>
<p>Also see:</p>
<ul>
<li><http://zfs-create.blogspot.nl/></li>
</ul>
</div>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-09-26 20:15:05</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2016-06-13 01:47:32</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../common-tasks/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Common Tasks" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Common Tasks
              </div>
            </div>
          </a>
        
        
          
          <a href="../network-communications/" class="md-footer__link md-footer__link--next" aria-label="Next: Network Communications" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Network Communications
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 <a href="https://www.openindiana.org">The OpenIndiana Project</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.footer", "content.action.edit", "content.code.copy"], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>