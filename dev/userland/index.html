
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.openindiana.org/dev/userland/">
      
      
        <link rel="prev" href="../building-openindiana/">
      
      
        <link rel="next" href="../graphics-stack/">
      
      
      <link rel="icon" href="../../oi_logo.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.7">
    
    
      
        <title>Building with oi-userland - OpenIndiana Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-with-oi-userland" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenIndiana Docs" class="md-header__button md-logo" aria-label="OpenIndiana Docs" data-md-component="logo">
      
  <img src="../../oi_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenIndiana Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building with oi-userland
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenIndiana/oi-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../misc/openindiana/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../handbook/getting-started/" class="md-tabs__link">
          
  
  Handbook

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../books/about/" class="md-tabs__link">
          
  
  OpenSolaris Books

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contrib/content/" class="md-tabs__link">
          
  
  Contrib

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenIndiana Docs" class="md-nav__button md-logo" aria-label="OpenIndiana Docs" data-md-component="logo">
      
  <img src="../../oi_logo.png" alt="logo">

    </a>
    OpenIndiana Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenIndiana/oi-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/openindiana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About OpenIndiana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/oi-docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About OpenIndiana Docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenIndiana Code of Conduct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/pdl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Public Documentation License
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Release Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/latest-changes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Latest changes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2020.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2020.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2019.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2019.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2018.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2018.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2017.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2017.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2016.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2016.04-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016.04 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2015.10-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015.10 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/2015.03-release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015.03 Release Notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Handbook
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Handbook
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/common-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/systems-administration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systems Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/network-communications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Communications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/appendix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Appendix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community Contributed Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Community Contributed Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About Community Contributed Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/oracledb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Oracle Database Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/samqfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage Archive Manager Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/sunray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sun Ray Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/inputmethod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intelligent Input Bus (IBus)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/squeak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Squeak Smalltalk-80 Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/texlive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TeX Live Typesetting Software Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/vagrant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vagrant Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/community/quikstor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using RDX Quikstor media
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community Hardware Compatibility List
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Community Hardware Compatibility List
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../community-hcl/getting-hardware-info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting information about hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../community-hcl/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../community-hcl/systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" checked>
        
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer's Corner
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Developer's Corner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../building-openindiana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building OpenIndiana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Building with oi-userland
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Building with oi-userland
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-openindianas-unified-build-system" class="md-nav__link">
    Using OpenIndiana's unified build system
  </a>
  
    <nav class="md-nav" aria-label="Using OpenIndiana's unified build system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-oi-userland" class="md-nav__link">
    Overview of oi-userland
  </a>
  
    <nav class="md-nav" aria-label="Overview of oi-userland">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-component-usually-consists-of-several-files" class="md-nav__link">
    A component usually consists of several files:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-your-build-environment" class="md-nav__link">
    Setting up your build environment
  </a>
  
    <nav class="md-nav" aria-label="Setting up your build environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-rbac-profile-to-the-build-user" class="md-nav__link">
    Adding RBAC profile to the build user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-oi-userland" class="md-nav__link">
    Downloading oi-userland
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-local-repository-to-your-publisher-list" class="md-nav__link">
    Adding the local repository to your publisher list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-the-local-repository-as-primary-publisher" class="md-nav__link">
    Setting the local repository as primary publisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-running-a-local-pkg-server-for-installation-on-other-zoneshosts" class="md-nav__link">
    Optional: Running a local pkg server for installation on other zones/hosts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-and-installing-your-first-packages" class="md-nav__link">
    Building and installing your first packages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-first-component" class="md-nav__link">
    Creating your first component
  </a>
  
    <nav class="md-nav" aria-label="Creating your first component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-makefile" class="md-nav__link">
    Creating Makefile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-p5m-files" class="md-nav__link">
    Creating p5m files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-packages" class="md-nav__link">
    Publishing packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-package" class="md-nav__link">
    Installing the package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing-changes-back-to-oi-userland" class="md-nav__link">
    Contributing changes back to oi-userland
  </a>
  
    <nav class="md-nav" aria-label="Contributing changes back to oi-userland">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#every-time-you-add-or-modify-a-component-create-a-new-branch" class="md-nav__link">
    Every time you add or modify a component, create a new branch:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-this-branch-synchronized-with-upstreamoihipster" class="md-nav__link">
    Keep this branch synchronized with upstream/oi/hipster:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#committing-changes" class="md-nav__link">
    Committing changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asking-for-change-integration" class="md-nav__link">
    Asking for change integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checking-jenkins-instance" class="md-nav__link">
    Checking Jenkins instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../graphics-stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphics stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pdf/ips-dev-guide.pdf" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Packaging and Delivering Software with IPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../distribution-constructor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using distribution constructor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../existing-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Existing tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../repo-cleanup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cleaning up OpenIndiana repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../handbook/pdfdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PDF Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenSolaris Books
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            OpenSolaris Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About OpenSolaris Books
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/express/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solaris Express Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/trusted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trusted Extensions Administration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../books/develop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Titles
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contrib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contrib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/content/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Content Creation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/roles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Roles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Topics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributor Style Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markdown Syntax Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git Usage Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-openindianas-unified-build-system" class="md-nav__link">
    Using OpenIndiana's unified build system
  </a>
  
    <nav class="md-nav" aria-label="Using OpenIndiana's unified build system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-oi-userland" class="md-nav__link">
    Overview of oi-userland
  </a>
  
    <nav class="md-nav" aria-label="Overview of oi-userland">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-component-usually-consists-of-several-files" class="md-nav__link">
    A component usually consists of several files:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-your-build-environment" class="md-nav__link">
    Setting up your build environment
  </a>
  
    <nav class="md-nav" aria-label="Setting up your build environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-rbac-profile-to-the-build-user" class="md-nav__link">
    Adding RBAC profile to the build user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-oi-userland" class="md-nav__link">
    Downloading oi-userland
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-local-repository-to-your-publisher-list" class="md-nav__link">
    Adding the local repository to your publisher list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-the-local-repository-as-primary-publisher" class="md-nav__link">
    Setting the local repository as primary publisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-running-a-local-pkg-server-for-installation-on-other-zoneshosts" class="md-nav__link">
    Optional: Running a local pkg server for installation on other zones/hosts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-and-installing-your-first-packages" class="md-nav__link">
    Building and installing your first packages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-first-component" class="md-nav__link">
    Creating your first component
  </a>
  
    <nav class="md-nav" aria-label="Creating your first component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-makefile" class="md-nav__link">
    Creating Makefile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-p5m-files" class="md-nav__link">
    Creating p5m files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-packages" class="md-nav__link">
    Publishing packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-package" class="md-nav__link">
    Installing the package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing-changes-back-to-oi-userland" class="md-nav__link">
    Contributing changes back to oi-userland
  </a>
  
    <nav class="md-nav" aria-label="Contributing changes back to oi-userland">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#every-time-you-add-or-modify-a-component-create-a-new-branch" class="md-nav__link">
    Every time you add or modify a component, create a new branch:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-this-branch-synchronized-with-upstreamoihipster" class="md-nav__link">
    Keep this branch synchronized with upstream/oi/hipster:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#committing-changes" class="md-nav__link">
    Committing changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asking-for-change-integration" class="md-nav__link">
    Asking for change integration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checking-jenkins-instance" class="md-nav__link">
    Checking Jenkins instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/OpenIndiana/oi-docs/edit/master/docs/dev/userland.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<!--

The contents of this Documentation are subject to the Public Documentation License Version 1.01
(the "License"); you may only use this Documentation if you comply with the terms of this License.
A copy of the License is available at http://illumos.org/license/PDL.

The Original Documentation is _________________.

The Initial Writer of the Original Documentation is Aurelien Larcher Copyright (C) 2016.
All Rights Reserved. (Initial Writer contact(s):________________[Insert hyperlink/alias]).

Contributor(s): Johnathan Jenkins, Michael Kruger, Theodore SeÃ¡n Tubbs

Portions created by Adam Stevko are Copyright (C) 2016.
Portions created by Alexander Pyhalov are Copyright (C) 2019.

Portions created by ______ are Copyright (C)_________[Insert year(s)].
All Rights Reserved. (Contributor contact(s):________________[Insert hyperlink/alias]).

-->

<h1 id="building-with-oi-userland">Building with oi-userland</h1>
<h2 id="using-openindianas-unified-build-system">Using OpenIndiana's unified build system</h2>
<p>OpenIndiana Hipster's primary build framework is oi-userland. It's tied into OpenIndiana <a href="https://hipster.openindiana.org/jenkins">continuous integration platform</a>.</p>
<p>When an update is committed to the oi-userland git repository:</p>
<ul>
<li>an automated build is kicked off,</li>
<li>then automatically the binary package will be published to the /hipster repository,</li>
<li>finally, the status of the build will be reported by oibot to the #oi-dev libera.chat IRC channel.</li>
</ul>
<h3 id="overview-of-oi-userland">Overview of oi-userland</h3>
<p>Originally oi-userland is a fork of Oracle's <a href="https://github.com/oracle/solaris-userland/">userland-gate</a> which evolved in an independent way. The layout is very similar.</p>
<p>Inside oi-userland is a directory called "components", under which directories for software package category groups live.
Inside each of these package group directories are typically directories for all software packages belonging to the category.
Some have even more sub-directories before reaching the leaf directories containing the software packages.
Note that some software packages don't have a package category group yet.
Inside each of the software package directories there is a main Makefile and other files necessary to build one or more packages.
The complete set of instructions to build one or more related packages is called "a component".</p>
<h4 id="a-component-usually-consists-of-several-files">A component usually consists of several files:</h4>
<ul>
<li><code>Makefile</code>: the recipe to build the software and install it locally (usually to the <code>build/prototype/$(MACH)</code> directory)</li>
<li><code>patches/</code>: directory containing patches applied before the configuration</li>
<li><code>files/</code>: directory containing additional files distributed with packages</li>
<li><code>*.p5m</code>: manifests used to generate the IPS package</li>
<li><code>$(COMPONENT_NAME).license</code>: file containing the licenses applicable to the software</li>
</ul>
<p>To build a component you simply cd into the directory of the software, and type "gmake TARGET" (here we use gmake to call GNU make), where TARGET can be one of:</p>
<table>
<thead>
<tr>
<th>Target</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>clobber</code></td>
<td>cleans up the component directory completely, including deleting source</td>
</tr>
<tr>
<td><code>download</code></td>
<td>fetches the source archive and verify its <code>SHA256</code> sum</td>
</tr>
<tr>
<td><code>prep</code></td>
<td>extract and apply patches</td>
</tr>
<tr>
<td><code>build</code></td>
<td>configure and build</td>
</tr>
<tr>
<td><code>install</code></td>
<td>install software into the prototype directory</td>
</tr>
<tr>
<td><code>sample-manifest</code></td>
<td>generate a sample IPS manifest based on the files installed to the prototype directory</td>
</tr>
<tr>
<td><code>publish</code></td>
<td>publish the package to the local repository</td>
</tr>
<tr>
<td><code>pre-publish</code></td>
<td>run all pre-publication checks (does actually what publish does, just without sending package to local repository)</td>
</tr>
<tr>
<td><code>REQUIRED_PACKAGES</code></td>
<td>guess and generate build dependencies for the packages, manual edit might be needed</td>
</tr>
<tr>
<td><code>env-check</code></td>
<td>check build environment for missing packages</td>
</tr>
<tr>
<td><code>env-prep</code></td>
<td>install missing build dependencies (requires elevated privileges)</td>
</tr>
</tbody>
</table>
<div class="note">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Before adding new packages to oi-userland...</strong></p>
<p>Before considering adding a new package to oi-userland, please check first whether someone else is working on the package by checking the issue tracker, mailing <a href="mailto:oi-dev@openindiana.org">oi-dev@openindiana.org</a> or asking on the IRC (#oi-dev at irc.libera.chat)</p>
<ul>
<li>If you don't find anyone already working on a port, please register your effort by opening an issue.</li>
<li>If you wish to update an existing port, look at the log for the component Makefile ("git log Makefile") and make sure you either contact the person who last updated the Makefile or include them on notifications for the issue by ticking their name.</li>
</ul>
<p>This will ensure efforts aren't duplicated and help to ensure sanity and comity amongst project members.</p>
</div>
</div>
<h3 id="setting-up-your-build-environment">Setting up your build environment</h3>
<p>We strongly recommend building packages inside a fresh local zone set up exclusively for building. See <a href="../../handbook/systems-administration/#quick-setup-example">Quick zone setup example</a> for simple instructions.</p>
<p>Further we assume that you are logged into the build zone if you set up the build environment in a zone the directory were oi-userland is cloned can otherwise be anywhere you like.</p>
<h4 id="adding-rbac-profile-to-the-build-user">Adding RBAC profile to the build user</h4>
<p>Installing software requires privileges, so your build user must have at minimum the 'Software Installation' profile:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>profiles
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>Software<span class="w"> </span>Installation
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>ZFS<span class="w"> </span>File<span class="w"> </span>System<span class="w"> </span>Management
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>Console<span class="w"> </span>User
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>Suspend<span class="w"> </span>To<span class="w"> </span>RAM
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>Suspend<span class="w"> </span>To<span class="w"> </span>Disk
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>Brightness
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>CPU<span class="w"> </span>Power<span class="w"> </span>Management
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>Network<span class="w"> </span>Autoconf<span class="w"> </span>User
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>Desktop<span class="w"> </span>Removable<span class="w"> </span>Media<span class="w"> </span>User
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>Basic<span class="w"> </span>Solaris<span class="w"> </span>User
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>All
</span></code></pre></div>
<p>If it is not the case add this profile to your build user:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>pfexec<span class="w"> </span>su<span class="w"> </span>-
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>usermod<span class="w"> </span>-P<span class="s1">&#39;Software Installation&#39;</span><span class="w"> </span>&lt;username&gt;
</span></code></pre></div>
<p>This is not necessary if your user has already the 'Primary Administrator' profile.</p>
<h4 id="downloading-oi-userland">Downloading oi-userland</h4>
<p>Start by forking <a href="https://github.com/OpenIndiana/oi-userland">oi-userland repository</a> on Github and then check out the repository (subdirectory oi-userland must not pre-exist):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">cd</span><span class="w"> </span>~
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mylogin/oi-userland
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nb">cd</span><span class="w"> </span>oi-userland
</span></code></pre></div>
<p>Add https://github.com/OpenIndiana/oi-userland/ as upstream to your repository to resync your repository with oi-userland.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>upstream<span class="w"> </span>https://github.com/OpenIndiana/oi-userland/
</span></code></pre></div>
<p>Run the setup stage which will prepare some tools and create an IPS pkg5 repository for first use under the i386 directory:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/oi-userland
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>gmake<span class="w"> </span>setup
</span></code></pre></div>
<h4 id="adding-the-local-repository-to-your-publisher-list">Adding the local repository to your publisher list</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>set-publisher<span class="w"> </span>-g<span class="w"> </span>file://<span class="nv">$HOME</span>/oi-userland/i386/repo<span class="w"> </span>userland
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>set-publisher<span class="w"> </span>--non-sticky<span class="w"> </span>openindiana.org
</span></code></pre></div>
<h4 id="setting-the-local-repository-as-primary-publisher">Setting the local repository as primary publisher</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>set-publisher<span class="w"> </span>--search-first<span class="w"> </span>userland
</span></code></pre></div>
<h4 id="optional-running-a-local-pkg-server-for-installation-on-other-zoneshosts">Optional: Running a local pkg server for installation on other zones/hosts</h4>
<p>If you would like to use your oi-userland repository on other zones or hosts, you can run a pkg server:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$<span class="w"> </span>pfexec<span class="w"> </span>svccfg<span class="w"> </span>-s<span class="w">  </span>pkg/server
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>svc:/application/pkg/server&gt;<span class="w"> </span>add<span class="w"> </span>oi-userland
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>svc:/application/pkg/server&gt;<span class="w"> </span><span class="k">select</span><span class="w"> </span>oi-userland
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>svc:/application/pkg/server:oi-userland&gt;<span class="w"> </span>addpg<span class="w"> </span>pkg<span class="w"> </span>application
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>svc:/application/pkg/server:oi-userland&gt;<span class="w"> </span>setprop<span class="w"> </span>pkg/inst_root<span class="o">=</span>astring:<span class="s2">&quot;/export/home/username/oi-userland/i386/repo&quot;</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>svc:/application/pkg/server:oi-userland&gt;<span class="w"> </span>setprop<span class="w"> </span>pkg/port<span class="o">=</span>count:<span class="s2">&quot;10000&quot;</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>svc:/application/pkg/server:oi-userland&gt;<span class="w"> </span>setprop<span class="w"> </span>pkg/readonly<span class="o">=</span>boolean:<span class="s2">&quot;true&quot;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>svc:/application/pkg/server:oi-userland&gt;<span class="w"> </span>refresh
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>svc:/application/pkg/server:oi-userland&gt;<span class="w"> </span><span class="nb">exit</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>$<span class="w"> </span>pfexec<span class="w"> </span>svcadm<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>oi-userland
</span></code></pre></div>
<p>On other hosts you can then specify http://hostname:10000 instead of the file:// address above.
If you only intend to install and test packages locally this is not necessary as on-disk repository access suffices.</p>
<h3 id="building-and-installing-your-first-packages">Building and installing your first packages</h3>
<p>Enter to oi-userland/components/PATH/TO/COMPONENT directory and run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/oi-userland/components/SOFTWARE
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>gmake<span class="w"> </span>env-prep
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>gmake<span class="w"> </span>publish
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>refresh
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>install<span class="w"> </span>pkg://userland/PACKAGE_FMRI
</span></code></pre></div>
<p>Here PACKAGE_FMRI is a full name (FMRI) of package which you want to install. The FMRIs of published packages will be printed in the end of <code>publish</code> stage.
Note, that running <code>gmake env-prep</code> is strictly not required, if you are sure that all build requirements are satisfied.</p>
<p>To speed up the compilation you can pass an optional argument to gmake setting COMPONENT_BUILD_ARGS variable in your environment, for instance with</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">COMPONENT_BUILD_ARGS</span><span class="o">=</span>-j4
</span></code></pre></div>
<p>to use 4 jobs for builds.</p>
<h2 id="creating-your-first-component">Creating your first component</h2>
<p>The easiest way to create new component is to take one which is similar to yours and modify it as needed. Also you can look at <a href="https://github.com/OpenIndiana/oi-userland/tree/oi/hipster/templates">Makefile templates</a> delivered with oi-userland.</p>
<h3 id="creating-makefile">Creating Makefile</h3>
<p>A component Makefile usually contains variables describing how a component should be built, installed and packaged.
On the top of the Makefile it includes <code>../../../make-rules/shared-macros.mk</code> where <code>../../../</code> is the relative path from the component directory to the make-rules directory.
The file shared-macros.mk contains global constants used by other makefiles. Sometimes some global variables that alter these constants are declared before this include.
The first section of the Makefile contains definitions of the component name, version, an url where the software should be fetched from, a short description embedded in the package metadata and so on.
Look, for example, at <code>library/libjpeg6-ijg/Makefile</code>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>COMPONENT_NAME=         libjpeg6-ijg
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>COMPONENT_VERSION=      6.0.2
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>LIBJPEG_API_VERSION=    6b
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>COMPONENT_FMRI=         image/library/libjpeg6-ijg
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>COMPONENT_CLASSIFICATION=System/Multimedia Libraries
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>COMPONENT_PROJECT_URL=  http://www.ijg.org/
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>COMPONENT_SUMMARY=      libjpeg - Independent JPEG Group library version 6b
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>COMPONENT_SRC=          jpeg-$(LIBJPEG_API_VERSION)
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>COMPONENT_ARCHIVE=      $(COMPONENT_NAME)-$(COMPONENT_VERSION).tar.gz
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>COMPONENT_ARCHIVE_HASH= \
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a> sha256:75c3ec241e9996504fe02a9ed4d12f16b74ade713972f3db9e65ce95cd27e35d
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>COMPONENT_ARCHIVE_URL=  http://www.ijg.org/files/jpegsrc.v$(LIBJPEG_API_VERSION).tar.gz
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>COMPONENT_LICENSE=      IJG,GPLv2.0
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>COMPONENT_LICENSE_FILE= $(COMPONENT_NAME).license
</span></code></pre></div>
<p>Here</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Value</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>COMPONENT_NAME</td>
<td>libjpeg6-ijg</td>
<td>The name of the component, usually it's a well-known software name</td>
</tr>
<tr>
<td>COMPONENT_VERSION</td>
<td>6.0.2</td>
<td>The software version. If the version contains letters, the IPS_COMPONENT_VERSION variable should define a numerical version used for the package, as the IPS version string doesn't allow for letters</td>
</tr>
<tr>
<td>LIBJPEG_API_VERSION</td>
<td>6b</td>
<td>In this example this is a local variable declared in the Makefile.</td>
</tr>
<tr>
<td>COMPONENT_FMRI</td>
<td>image/library/libjpeg6-ijg</td>
<td>This variable can be used in an IPS manifest to specify the FMRI (a name) of the package. It should folllow the conventions for package FMRIs.</td>
</tr>
<tr>
<td>COMPONENT_CLASSIFICATION</td>
<td>System/Multimedia Libraries</td>
<td>This entry should be in the <a href="https://github.com/OpenIndiana/pkg5/blob/oi/doc/dev-guide/appendix-a.txt">OpenSolaris IPS Classification 2008</a></td>
</tr>
<tr>
<td>COMPONENT_PROJECT_URL</td>
<td>http://www.ijg.org/</td>
<td>Upstream project website</td>
</tr>
<tr>
<td>COMPONENT_SUMMARY</td>
<td>libjpeg - Independent JPEG Group library version 6b</td>
<td>A short description (one-liner)</td>
</tr>
<tr>
<td>COMPONENT_SRC</td>
<td><code>jpeg-$(LIBJPEG_API_VERSION)</code></td>
<td>The name of source after unpacking the archive</td>
</tr>
<tr>
<td>COMPONENT_ARCHIVE</td>
<td><code>$(COMPONENT_NAME)-$(COMPONENT_VERSION).tar.gz</code></td>
<td>The software archive</td>
</tr>
<tr>
<td>COMPONENT_ARCHIVE_HASH</td>
<td>sha256:75c3ec241e9996504fe02a9ed4d12f16b74ade713972f3db9e65ce95cd27e35d</td>
<td>The SHA256 checksum of software archive</td>
</tr>
<tr>
<td>COMPONENT_ARCHIVE_URL</td>
<td><code>http://www.ijg.org/files/jpegsrc.v$(LIBJPEG_API_VERSION).tar.gz</code></td>
<td>The URI to get the COMPONENT_ARCHIVE</td>
</tr>
<tr>
<td>COMPONENT_LICENSE</td>
<td>IJG,GPLv2.0</td>
<td>A comma separated list of licenses</td>
</tr>
<tr>
<td>COMPONENT_LICENSE_FILE</td>
<td><code>$(COMPONENT_NAME).license</code></td>
<td>The file with license text</td>
</tr>
</tbody>
</table>
<p>Components are usually based on one of the following Makefiles depending on build system used by packaged software (look in the <code>make-rules</code> directory for more makefiles):</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Build</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ant.mk</code></td>
<td>Ant</td>
</tr>
<tr>
<td><code>attpackagemake.mk</code></td>
<td>AT&amp;T package tools</td>
</tr>
<tr>
<td><code>cmake.mk</code></td>
<td>CMake</td>
</tr>
<tr>
<td><code>configure.mk</code></td>
<td>Autotools</td>
</tr>
<tr>
<td><code>gem.mk</code></td>
<td>Ruby</td>
</tr>
<tr>
<td><code>justmake.mk</code></td>
<td>plain Makefile</td>
</tr>
<tr>
<td><code>makemaker.mk</code></td>
<td>Perl</td>
</tr>
<tr>
<td><code>setup.py</code></td>
<td>Python distutils</td>
</tr>
</tbody>
</table>
<p>Read the <code>.mk</code> file to see which variables you can modify, in general you can find variables such as:</p>
<ul>
<li><code>*_ENV</code></li>
<li><code>*_OPTIONS</code></li>
<li><code>PRE_*_ACTION</code></li>
<li><code>POST_*_ACTION</code></li>
</ul>
<p>For example, you may add this line for an Autotools-based component:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nv">CONFIGURE_OPTIONS</span><span class="o">+=</span><span class="w"> </span>--enable-shared
</span></code></pre></div>
<p>After creating the component Makefile you can run <code>gmake prep</code>.</p>
<p>Now you can create necessary patches for the component and put them in the patches directory.</p>
<p>When the component is built and installed correctly (via <code>gmake build</code> and <code>gmake install</code>), look if you can run the test suite if one comes with the software.</p>
<p>It's advised to put the expected test ouput in test/results-BITS.master (where BITS are either 32 or 64) and to ensure
that the <code>gmake test</code> target generates reproducible results.
You can use the COMPONENT_TEST_TRANSFORMS variable to set a list of sed directives to transform the test output and
make it reproducible.</p>
<h3 id="creating-p5m-files">Creating p5m files</h3>
<p>When the <code>install</code> target passes you can run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>gmake<span class="w"> </span>sample-manifest
</span></code></pre></div>
<p>to generate a manifest from the list of installed files.</p>
<p>Copy the file <code>manifests/sample-manifest.p5m</code> to <code>$(COMPONENT_NAME).p5m</code> and edit it:</p>
<ul>
<li>Add your name as a contributor</li>
<li>Remove unused entries from the manifest:<ul>
<li>directories: <code>:%g/^dir/d</code> (Vim)</li>
<li>static libs: <code>:%g/.a$/d</code> (Vim)</li>
<li>libtool files: <code>:%g/.la$/d</code> (Vim)</li>
<li>Python *.pyc: <code>:%g/.pyc$/d</code> (Vim)</li>
</ul>
</li>
</ul>
<p>For some components, specific rules need to be applied: they can be implemented with <em>transforms</em>.
Some Makefile targets defined in <code>make-rules/ips.mk</code> apply transforms from files in the <code>transforms</code> directory at the root of oi-userland.
These transforms can be used as examples if you need custom transforms for your component.</p>
<h3 id="publishing-packages">Publishing packages</h3>
<p>After creating a p5m file run <code>gmake REQUIRED_PACKAGES</code> to automatically generate a list of run-time dependencies of the package (REQUIRED_PACKAGES section of the Makefile).</p>
<p>Add necessary build time dependencies on the top of the generated section.</p>
<p>Run <code>gmake publish</code>. If the manifest is valid your package is published to the local repository.</p>
<p>To be able to search for the new packages in the local repository you need to rebuild search indexes:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>pkgrepo<span class="w"> </span>refresh<span class="w"> </span>-s<span class="w"> </span>/path/to/my_repo
</span></code></pre></div>
<p>You can even rebuild the entire metadata:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>pkgrepo<span class="w"> </span>rebuild<span class="w"> </span>-s<span class="w"> </span>/path/to/my_repo
</span></code></pre></div>
<h3 id="installing-the-package">Installing the package</h3>
<p>After you've published the package to your local repository and rebuilt the repository index or metadata you can install the package and perform whatever testing is appropriate.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>pkg<span class="w"> </span>publisher
</span></code></pre></div>
<p>If the package you built and published to the local userland repository is not already part of hipster it should be straightforward to install it:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>install<span class="w"> </span>your/package/name
</span></code></pre></div>
<p>If, however, the package you built is an updated version of an existing package then you may have to take additional steps before it can be updated.</p>
<p>If <code>pkg</code> refuses to install the package from your local repository it may be because the userland-incorporation is preventing updates to the version of the package:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>$<span class="w"> </span>pfexec<span class="w"> </span>pkg<span class="w"> </span>update<span class="w"> </span>image/library/libjpeg6-ijg
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>No<span class="w"> </span>updates<span class="w"> </span>available<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>image.
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>$<span class="w"> </span>pfexec<span class="w"> </span>pkg<span class="w"> </span>update<span class="w"> </span>pkg://userland/image/library/libjpeg6-ijg@6.0.2-2018.0.0.1:20180211T125627Z
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>pkg<span class="w"> </span>update:<span class="w"> </span>No<span class="w"> </span>matching<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>image/library/libjpeg6-ijg<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>installed:
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">  </span>Reject:<span class="w">  </span>pkg://userland/image/library/libjpeg6-ijg@6.0.2-2018.0.0.1
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">  </span>Reason:<span class="w">  </span>This<span class="w"> </span>version<span class="w"> </span>is<span class="w"> </span>excluded<span class="w"> </span>by<span class="w"> </span>installed<span class="w"> </span>incorporation<span class="w"> </span>consolidation/userland/userland-incorporation@0.5.11-2018.0.0.11745
</span></code></pre></div>
<p>If you will install many test versions of packages on your development system you may find it easiest to uninstall the userland-incorporation.  Alternately, if you want to test a package on a system while keeping userland-incorporation, you can use <code>pkg change-facet</code> to relax the version constraint for just that package:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>change-facet<span class="w"> </span>facet.version-lock.your/package/name/here<span class="o">=</span><span class="nb">false</span>
</span></code></pre></div>
<p>After you have performed one of these steps to remove the version constraint there is one more issue you may encounter.  Because the installed version of the package came from the openindiana.org publisher but the updated version you want to install and test is associated with the userland publisher, <code>pkg</code> will by default not allow the package update to switch which publisher provides the package.</p>
<p>One option to work around this is to make the openindiana.org publisher non-sticky:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>set-publisher<span class="w"> </span>--non-sticky<span class="w"> </span>openindiana.org
</span></code></pre></div>
<p>You only need to perform that operation on your development system once.</p>
<p>Alternately, you can force <code>pkg</code> to apply an update from a different publisher by specifying the full FMRI for the package, including the publisher:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>pfexec<span class="w"> </span>pkg<span class="w"> </span>update<span class="w"> </span>pkg://userland/image/library/libjpeg6-ijg@6.0.2-2018.0.0.1:20180211T125627Z
</span></code></pre></div>
<h2 id="contributing-changes-back-to-oi-userland">Contributing changes back to oi-userland</h2>
<h3 id="every-time-you-add-or-modify-a-component-create-a-new-branch">Every time you add or modify a component, create a new branch:</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>my_feature
</span></code></pre></div>
<h3 id="keep-this-branch-synchronized-with-upstreamoihipster">Keep this branch synchronized with upstream/oi/hipster:</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>git<span class="w"> </span>pull<span class="w"> </span>--rebase<span class="w"> </span>upstream<span class="w"> </span>oi/hipster
</span></code></pre></div>
<p>Your local branch is forwarded to the last commit of oi/hipster and your additional commits are kept on top of the stack.</p>
<h3 id="committing-changes">Committing changes</h3>
<p>When you think you are ready with changes you need to commit them locally and push those changes back to your Github repository.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nb">cd</span><span class="w"> </span>~/oi-userland/components/SOFTWARE
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>git<span class="w"> </span>add<span class="w"> </span>Makefile<span class="w"> </span>*.p5m<span class="w"> </span>&lt;etc.&gt;
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>git<span class="w"> </span>commit
</span></code></pre></div>
<p>Commit messages should be simple and describe what you did, e.g "Added XYZ", "XYZ: updated to SOME_VERSION", "XYZ: fixed SOMETHING" or "BUG_ID BUG_SUMMARY", where BUG_ID is issue number from issue tracker and BUG_SUMMARY is the issue name.</p>
<p>If you've created several commits while working on your component it's necessary to <em>squash</em> all your commits into one.</p>
<p>To do it, first check how many commits are to be considered:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>git<span class="w"> </span>log
</span></code></pre></div>
<p>then</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>HEAD~N
</span></code></pre></div>
<p>with N the number of commits to be squashed and follow the instructions: the letter 's' should be put in place of 'pick' for the N - 1 commits before the last.</p>
<p>If you made a mistake with the commit message or author, use:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>git<span class="w"> </span>commit<span class="w"> </span>--amend
</span></code></pre></div>
<p>with the relevant option.</p>
<p>Now push your changes to your repository to GitHub.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>git<span class="w"> </span>push<span class="w"> </span>my_name<span class="w"> </span>my_feature
</span></code></pre></div>
<p>or</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>git<span class="w"> </span>push<span class="w"> </span>-f<span class="w"> </span>my_name<span class="w"> </span>my_feature
</span></code></pre></div>
<p>if the branch you just rebased had already been pushed: since the history is rewritten you need to force the push, be careful.</p>
<h3 id="asking-for-change-integration">Asking for change integration</h3>
<p>This is as simple as creating a Pull Request into the main oi-userland repository and asking developers to review your changeset. We should beware of possibly breaking packages as it adds additional work and can be unpleasant for other contributors (imagine a situation where gcc, perl or anything else needed for building packages is broken).</p>
<p>Changes can be reverted quite easily but once the package is built and published additional steps are needed. So try taking per-package testing and asking for wider testing into consideration.</p>
<p>If you contribute a package which is known to work but its functionality might be broken because of some issues, consider disabling it until the issue is removed.</p>
<h3 id="checking-jenkins-instance">Checking Jenkins instance</h3>
<p>Once the changes are merged into the main oi-userland repository, the Jenkins instance will pick up those bits and build them. If the build was successful, the built packages will be pushed into http://pkg.openindiana.org/hipster repository. If the package build was unsuccessful check the build logs and please try to come up with a solution and fix the problem so you can have the package published into the repository.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-09-03 19:46:49</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2016-06-06 02:47:56</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../building-openindiana/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Building OpenIndiana" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Building OpenIndiana
              </div>
            </div>
          </a>
        
        
          
          <a href="../graphics-stack/" class="md-footer__link md-footer__link--next" aria-label="Next: Graphics stack" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Graphics stack
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 <a href="https://www.openindiana.org">The OpenIndiana Project</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.footer", "content.action.edit", "content.code.copy", "search.highlight"], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>